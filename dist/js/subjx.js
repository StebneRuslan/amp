window.Subjx=function(r){var n={};function o(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return r[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}return o.m=r,o.c=n,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=1)}([function(t,e,r){},function(t,e,r){"use strict";r.r(e);r(0);var N=requestAnimationFrame||mozRequestAnimationFrame||webkitRequestAnimationFrame||msRequestAnimationFrame||function(t){return setTimeout(t,1e3/60)},n=cancelAnimationFrame||mozCancelAnimationFrame||function(t){clearTimeout(t)},o=(Array.prototype.forEach,Array.prototype.slice),i=Array.prototype.map,a=console.warn;function h(t){return null!=t}function j(t){return null==t}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var c=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.observers={}}return function(t,e,r){e&&s(t.prototype,e),r&&s(t,r)}(t,[{key:"subscribe",value:function(t,e){var r=this.observers;j(r[t])&&Object.defineProperty(r,t,{value:[]}),r[t].push(e)}},{key:"unsubscribe",value:function(e){this.observers=this.observers.filter(function(t){return t!==e})}},{key:"notify",value:function(e,r,n){j(this.observers[e])||this.observers[e].forEach(function(t){if(r!==t)switch(e){case"onmove":t.onMove(n);break;case"onrotate":t.onRotate(n);break;case"onresize":t.onResize(n);break;case"onapply":t.onApply(n);break;case"onrefreshstate":t.onRefreshState(n)}})}}]),t}();function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var f=function(){function i(t){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),!t)return this;if("string"==typeof t){var e=document.querySelectorAll(t);this.length=e.length;for(var r=0;r<this.length;r++)this[r]=e[r]}else if(1===t.nodeType||t===document)this[0]=t,this.length=1;else if(t instanceof Subjx||"object"===l(t)){this.length=t.length;for(var n=0;n<this.length;n++)this[n]=t[n]}else if(Array.isArray(t))for(var o=this.length=0;o<this.length;o++)1===t.nodeType&&(this[o]=t[o],this.length++);return this}return function(t,e,r){e&&u(t.prototype,e),r&&u(t,r)}(i,[{key:"css",value:function(t){return function(r){var t={setStyle:function(t){return function(t,e){var r=t.length;for(;r--;)for(var n in e)t[r].style[n]=e[n];return t.style}(this,t)},getStyle:function(){return function(t){var e=t.length;for(;e--;){if(t[e].currentStyle)return t[e].currentStyle[r];if(document.defaultView&&document.defaultView.getComputedStyle){if(r.includes("transform")){return document.defaultView.getComputedStyle(t[e],"")[r].replace(/-?1.22465e-16/g,"0").replace(/6.12323e-17/g,"0")}return document.defaultView.getComputedStyle(t[e],"")[r]}return t[e].style[r]}}(this)}};{if("string"==typeof r)return t.getStyle.apply(this,o.call(arguments,1));if("object"===l(r)||!r)return t.setStyle.apply(this,arguments);a("Method ".concat(r," does not exist"))}return!1}.call(this,t)}},{key:"find",value:function(t){return function(t){var e=this.length;for(;e--;)return A(this[e].querySelectorAll(t))}.call(this,t)}},{key:"each",value:function(t){return function(t){for(var e=o.call(this,0),r=e.length-1;0<=r;--r)n=r,t.call(e[n]);var n;return this}.call(this,t)}},{key:"on",value:function(){return function(){var t=this.length;for(;t--;)this[t].events||(this[t].events={},this[t].events[arguments[0]]=[]),2===arguments.length?document.addEventListener?this[t].addEventListener(arguments[0],arguments[1],!1):document.attachEvent?this[t].attachEvent("on".concat(arguments[0]),arguments[1]):this[t]["on".concat(arguments[0])]=arguments[1]:3===arguments.length&&"string"==typeof arguments[1]&&d(this[t],arguments[0],arguments[1],arguments[2],!0);return this}.apply(this,arguments)}},{key:"off",value:function(){return function(){var t=this.length;for(;t--;)this[t].events||(this[t].events={},this[t].events[arguments[0]]=[]),2===arguments.length?document.removeEventListener?this[t].removeEventListener(arguments[0],arguments[1],!1):document.detachEvent?this[t].detachEvent("on".concat(arguments[0]),arguments[1]):this[t]["on".concat(arguments[0])]=null:3===arguments.length&&"string"==typeof arguments[1]&&d(this[t],arguments[0],arguments[1],arguments[2],!1);return this}.apply(this,arguments)}},{key:"is",value:function(t){return function(t){var e=A(t),r=this.length;for(;r--;)if(this[r]===e[r])return!0;return!1}.call(this,t)}}]),i}();function d(t,e,r,n,o){function i(t){for(var e=t.target;e&&e!==this;)e.matches(r)&&n.call(e,t),e=e.parentNode}!0===o?document.addEventListener?t.addEventListener(e,i,!1):document.attachEvent?t.attachEvent("on".concat(e),i):t["on".concat(e)]=i:document.removeEventListener?t.removeEventListener(e,i,!1):document.detachEvent?t.detachEvent("on".concat(e),i):t["on".concat(e)]=null}function A(t){return new f(t)}function O(t){return t.getBoundingClientRect()}function w(t){return t.css("-webkit-transform")||t.css("-moz-transform")||t.css("-ms-transform")||t.css("-o-transform")||t.css("transform")||"none"}function P(t){var e={};for(var r in t=t.match(/(\w+\((\-?\d+\.?\d*e?\-?\d*(?:,|\s)?)+\))+/g)){var n=t[r].match(/[\w\.\-]+/g);e[n.shift()]=n.map(function(t){return Number(t)})}return e}function C(t){var e=w(t).match(/-?\d+\.?\d+|-?\d+/g);return e?e.map(function(t){return parseFloat(t)}):[1,0,0,1,0,0]}function x(e,t){if(t){if(e.classList){if(!(-1<t.indexOf(" ")))return e.classList.add(t);t.split(/\s+/).forEach(function(t){return e.classList.add(t)})}return e}}var p=/px|em|%|ex|ch|rem|vh|vw|vmin|vmax|mm|cm|in|pt|pc|deg/,g=Math.PI/180,ht=180/Math.PI;function Zt(t){var e=t.x,r=t.y,n=t.centerX,o=t.centerY,i=t.angle,a=t.newCenterX,s=t.newCenterY,c=z(n,o,e,r,i,!1,!1),l=z(a,s,e,r,i,!1,!1),u=e-(c.left-l.left),f=r-(c.top-l.top);return{resX:b(u),resY:b(f)}}function D(t,e){if(0===e)return t;var r=T(t,e);return r-t<e?r:void 0}function T(t,e){return 0===e?t:e*Math.round(t/e)}function L(t,e,r,n,o,i,a){var s=t+parseFloat(r)/2,c=e+parseFloat(n)/2,l=t-s,u=e-c,f=Math.atan2(u,l)+o,h=Math.sqrt(Math.pow(parseFloat(r)/2,2)+Math.pow(parseFloat(n)/2,2)),d=Math.cos(f),p=Math.sin(f),g=c+h*(p=!0===a?-p:p);return{left:b(s+h*(d=!0===i?-d:d)),top:b(g)}}function z(t,e,r,n,o,i,a){var s=Math.cos(o),c=Math.sin(o),l=(s=!0===i?-s:s)*(n-e)-(c=!0===a?-c:c)*(r-t)+e;return{left:b(s*(r-t)+c*(n-e)+t),top:b(l)}}function R(t,e){return/px/.test(t)?t:/%/.test(t)?"".concat(parseFloat(t)*parseFloat(e)/100,"px"):void 0}function B(t,e,r){return/px/.test(r)?t:/%/.test(r)?"".concat(100*parseFloat(t)/parseFloat(e),"%"):void 0}function q(t){return t.match(p)[0]}function b(t){return Number(t.toFixed(6))}function y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var m=function(){function r(t,e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.constructor===r)throw new TypeError("Cannot construct Subject instances directly");this.el=t,this.storage=null,this.Ob=e,this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onTouchMove=this._onTouchMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this)}return function(t,e,r){e&&y(t.prototype,e),r&&y(t,r)}(r,[{key:"enable",value:function(t){j(this.storage)?(this._load(t),this._init(this.el)):warn("Already enabled")}},{key:"disable",value:function(){var t=this.storage,e=this.el;j(t)||(function(e,t){if(t){if(e.classList){if(!(-1<t.indexOf(" ")))return e.classList.remove(t);t.split(/\s+/).forEach(function(t){return e.classList.remove(t)})}}}(e,"dg-drag"),this._destroy(),delete this.storage)}},{key:"_load",value:function(t){(function(e){x(this.el,"dg-drag");var t={x:10,y:10,angle:10*g},r={move:!1,resize:!1,rotate:!1};if(h(e)){if(h(e.snap)){var n=e.snap,o=n.x,i=n.y,a=n.angle;t.x=j(o)?10:o,t.y=j(i)?10:i,t.angle=j(a)?1*g:a*g}if(h(e.each)){var s=e.each,c=s.move,l=s.resize,u=s.rotate;r.move=c||!1,r.resize=l||!1,r.rotate=u||!1}}var f=this.Ob;(r.move||r.resize||r.rotate)&&(f.subscribe("onrefreshstate",this),f.subscribe("onapply",this));r.move&&f.subscribe("onmove",this);r.resize&&f.subscribe("onresize",this);r.rotate&&f.subscribe("onrotate",this);this.storage={drop:e&&function(t){return"function"==typeof t}(e.drop)?function(t){e.drop(t,this.el)}:function(){},snap:t,each:r}}).call(this,t)}},{key:"_draw",value:function(){var T=this;!function t(){var e=T.storage;if(e.frame=N(t),e.doDraw){e.doDraw=!1;var r=e.handle,n=e.handles,o=e.cx,i=e.cy,a=e.ch,s=e.cw,c=e.refang,l=e.pressang,u=e.pageX,f=e.pageY,h=e.center,d=(e.snap,e.parentScale),p=e.doDrag,g=e.doResize,b=e.doRotate,y=d[0],m=d[1],v=e.each,w=v.move,x=(v.resize,v.rotate);if(g){var X,M,Y,k,S,_=null,E=null;if(r.is(n.br)||r.is(n.mr))k=((f=(S=z(o,i,u,f,c,!1,!1)).top)-i)/m,Y=((u=S.left)-o)/y,r.is(n.br)&&(E=k+a),_=Y+s,M=X=!1;else if(r.is(n.tl)||r.is(n.ml))k=-((f=(S=z(o,i,u,f,c,!1,!1)).top)-i)/m,_=(Y=-((u=S.left)-o)/y)+s,r.is(n.tl)&&(E=k+a),M=X=!0;else if(r.is(n.tr)||r.is(n.tc)){var A=r.is(n.tr),O=r.is(n.tc);k=-((f=(S=z(o,i,u,f,c,A,!1)).top)-i)/m,Y=-((u=S.left)-o)/y,A&&(k=-k),E=k+a,A&&(_=Y+s),X=O,M=!0}else if(r.is(n.bl)||r.is(n.bc)){var j=r.is(n.bl);f=(S=z(o,i,u,f,c,!1,j)).top,Y=-((u=S.left)-o)/y,E=(k=(f-i)/m)+a,j&&(_=Y+s),X=j,M=!1}T._resize(_,E,X,M,Y,k)}if(p){var P=(f-i)/m,C=(u-o)/y;T._drag(P,C),w&&T.Ob.notify("onmove",T,{diffTop:P,diffLeft:C})}if(b){var D=Math.atan2(f-h.y,u-h.x)-l;T._rotate(D),x&&T.Ob.notify("onrotate",T,{radians:D})}}}()}},{key:"_start",value:function(t){t.stopImmediatePropagation&&t.stopImmediatePropagation();var e=this.storage,r=this._compute(t);e.pageX=t.pageX,e.pageY=t.pageY,e.cx=t.pageX,e.cy=t.pageY,e.ctrlKey=t.ctrlKey,e.shiftKey=t.shiftKey,Object.keys(r).forEach(function(t){e[t]=r[t]});var n=r.onRightEdge,o=r.onBottomEdge,i=r.onTopEdge,a=r.onLeftEdge,s=r.handle,c=r.factor,l=r.revX,u=r.revY,f=n||o||i||a,h=s.is(e.handles.rotator);e.doResize=f,e.doDrag=!h&&!f,e.doRotate=h,this.Ob&&this.Ob.notify("onrefreshstate",this,{factor:c,revX:l,revY:u,onTopEdge:i,onLeftEdge:a,onRightEdge:n,onBottomEdge:o}),this._draw()}},{key:"_moving",value:function(t){t.preventDefault&&t.preventDefault();var e=this.storage;e.pageX=t.pageX,e.pageY=t.pageY,e.doDraw=!0}},{key:"_end",value:function(t){t.stopImmediatePropagation&&t.stopImmediatePropagation();var e=this.storage,r=e.doResize?"resize":e.doDrag?"drag":"rotate";e.doResize=!1,e.doDrag=!1,e.doRotate=!1,e.doDraw=!1,this._apply(r),this.Ob&&this.Ob.notify("onapply",this,r),n(e.frame),e.drop.call(this,t)}},{key:"_onMouseDown",value:function(t){this._start(t),A(document).on("mousemove",this._onMouseMove).on("mouseup",this._onMouseUp)}},{key:"_onTouchStart",value:function(t){this._start(t.touches[0]),A(document).on("touchmove",this._onTouchMove).on("touchend",this._onTouchEnd)}},{key:"_onMouseMove",value:function(t){this._moving(t,this.el)}},{key:"_onTouchMove",value:function(t){this._moving(t.touches[0],this.el)}},{key:"_onMouseUp",value:function(t){!function(t){Object.values(t).forEach(function(t){t&&(t.style.display="none")})}(this.storage.guidlines),this._end(t,this.el),A(document).off("mousemove",this._onMouseMove).off("mouseup",this._onMouseUp)}},{key:"_onTouchEnd",value:function(t){0===t.touches.length&&this._end(t.changedTouches[0],this.el),A(document).off("touchmove",this._onTouchMove).off("touchend",this._onTouchEnd)}},{key:"onMove",value:function(t){this._drag(t.diffTop,t.diffLeft)}},{key:"onRotate",value:function(t){this._rotate(t.radians)}},{key:"onResize",value:function(t){var e=null!==t.width?this.storage.cw+t.x:null,r=null!==t.height?this.storage.ch+t.y:null;this._resize(e,r,t.revX,t.revY)}},{key:"onApply",value:function(t){this._apply(t)}}]),r}();function v(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function X(t){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function F(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function M(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Y(t,e){return!e||"object"!==X(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function k(t){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function S(t,e){return(S=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var I={stopDragX:!1,tempPositionX:0,stopDragY:!1,tempPositionY:0,normalizeX:0,normalizeY:0,newPositionX:0,newPositionY:0},_=function(){function o(t,e,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),window.parent.addEventListener("message",E),(n=Y(this,k(o).call(this,t,r))).enable(e),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&S(t,e)}(o,m),function(t,e,r){e&&M(t.prototype,e),r&&M(t,r)}(o,[{key:"_init",value:function(t,e){(function(t){var e=document.createElement("div");x(e,"dg-wrapper"),t.parentNode.insertBefore(e,t);var r=e,n=A(t),o=n.css("width"),i=n.css("height"),a=n.css("top"),s=n.css("left"),c=A(r.parentNode),l={top:a,left:s,width:R(o,c.css("width")),height:R(i,c.css("height")),transform:w(n)},u=document.createElement("div"),f={centerX:document.querySelector(".guid-line.guid-line-y.guid-center-y"),centerY:document.querySelector(".guid-line.guid-line-x.guid-center-x"),left:document.querySelector(".guid-line.guid-line-y.guid-left"),right:document.querySelector(".guid-line.guid-line-y.guid-right"),top:document.querySelector(".guid-line.guid-line-x.guid-top"),bottom:document.querySelector(".guid-line.guid-line-x.guid-bottom")},h=document.querySelector(".dg-wrapper + .drag-item-content");h=h||document.querySelector(".drag-item-content");var d,p,g=h.getBoundingClientRect();d=[].map.call(document.querySelectorAll(".drag-item-content"),function(t){if(h!==t){var e=t.getBoundingClientRect();return{left:e.left,top:e.top,right:e.right,bottom:e.bottom,centerX:e.left+e.width/2,centerY:e.top+e.height/2}}}).filter(function(t){return t}),p={left:g.left,top:g.top,right:g.right,bottom:g.bottom,centerX:g.left+g.width/2,centerY:g.top+g.height/2};var b=document.body.clientWidth/2,y=document.body.clientHeight/2;u.innerHTML='<div class="dg-hdl dg-rotator"></div>        <div class="dg-hdl dg-hdl-t dg-hdl-l dg-hdl-tl"></div>        <div class="dg-hdl dg-hdl-t dg-hdl-r dg-hdl-tr"></div>        <div class="dg-hdl dg-hdl-b dg-hdl-r dg-hdl-br"></div>        <div class="dg-hdl dg-hdl-b dg-hdl-l dg-hdl-bl"></div>        <div class="dg-hdl dg-hdl-t dg-hdl-c dg-hdl-tc"></div>        <div class="dg-hdl dg-hdl-b dg-hdl-c dg-hdl-bc"></div>        <div class="dg-hdl dg-hdl-m dg-hdl-l dg-hdl-ml"></div>        <div class="dg-hdl dg-hdl-m dg-hdl-r dg-hdl-mr"></div>',x(u,"dg-controls"),r.appendChild(u);var m=A(u);m.css(l);var v=A(r);Object.assign(this.storage,{controls:u,guidlines:f,coordinates:d,screenCenterX:b,screenCenterY:y,verticalCoordinates:Q(d,b,"left"),horizontalCoordinates:Q(d,y,"top"),activeElementCoordinates:p,activeElement:h,handles:{tl:v.find(".dg-hdl-tl"),tr:v.find(".dg-hdl-tr"),br:v.find(".dg-hdl-br"),bl:v.find(".dg-hdl-bl"),tc:v.find(".dg-hdl-tc"),bc:v.find(".dg-hdl-bc"),ml:v.find(".dg-hdl-ml"),mr:v.find(".dg-hdl-mr"),rotator:v.find(".dg-rotator")},parent:c}),m.on("mousedown",this._onMouseDown).on("touchstart",this._onTouchStart),n[0].querySelector(".text-container")&&(v.find(".dg-hdl-bc")[0].style.display="none",v.find(".dg-hdl-tc")[0].style.display="none")}).call(this,t,e)}},{key:"_destroy",value:function(t){(function(){window.parent.removeEventListener(E);var t=this.storage.controls;A(t).off("mousedown",this._onMouseDown).off("touchstart",this._onTouchStart),this.el.parentNode.removeChild(t.parentNode)}).call(this,t)}},{key:"_drag",value:function(){W.call.apply(W,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"_rotate",value:function(){G.call.apply(G,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"_resize",value:function(){U.call.apply(U,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"_compute",value:function(){return V.call.apply(V,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"_apply",value:function(){window.parent.postMessage({event:"apply-from-iframe"},"http://127.0.0.1:3978/#/edit");var t=this.storage,e=this.el,r=A(e),n=t.cached,o=t.parent,i=t.dimens,a=t.handle,s=t.controls;if(n){var c=F(n),l=c[4],u=c[5],f=$(c),h=o.css("width"),d=o.css("height"),p=parseFloat(R(r.css("left"),h)),g=parseFloat(R(r.css("top"),d));f.left=B(p+l+"px",h,i.left),f.top=B(g+u+"px",d,i.top);var b=e.querySelector(".text-container"),y=a[0].classList.contains("dg-controls")||!b||!a[0].classList.contains("dg-hdl-ml")&&!a[0].classList.contains("dg-hdl-mr");window.parent.postMessage({event:"resize-on-mouseup",position:{width:s.style.width,height:s.style.height,diffLeft:l,diffTop:u},isTextDrag:y},"http://127.0.0.1:3978/#/edit"),this.storage.cached=null}}},{key:"onRefreshState",value:function(t){var e=this.storage,r=function(t,e,r){var n=this.storage,o=n.controls,i=n.handles,a=n.parent,s=n.snap,c=O(i.tl[0]),l=O(i.tr[0]),u=Math.atan2(l.top-c.top,l.left-c.left)*t,f=parseFloat(R(o.style.width,a.css("width"))),h=parseFloat(R(o.style.height,a.css("height"))),d=C(A(o)),p=L(d[4],d[5],f,h,u,e,r),g=A(this.el),b=this.el.style;return{transform:d,parentTransform:C(a),left:T(d[4],s.x),top:T(d[5],s.y),coordX:p.left,coordY:p.top,refang:u,cw:f,ch:h,dimens:{top:q(b.top||g.css("top")),left:q(b.left||g.css("left")),width:q(b.width||g.css("width")),height:q(b.height||g.css("height"))}}}.call(this,t.factor,t.revX,t.revY);Object.keys(r).forEach(function(t){e[t]=r[t]})}}]),o}(),H=!0;function E(t){"set-lock-settings"===t.data.event&&(H=t.data.locked)}function V(t){I.stopDragX=!1,I.stopDragY=!1,I.tempPositionX=0,I.tempPositionY=0,I.normalizeX=0,I.newPositionX=0,I.newPositionY=0,I.tempPositionX=0,I.tempPositionY=0,window.parent.postMessage({event:"compute-from-iframe"},"http://127.0.0.1:3978/#/edit");var e=this.el,r=this.storage,n=r.handles,o=r.controls,i=r.parent,a=r.snap,s=A(t.target),c=e.querySelector(".text-container"),l=s[0].classList.contains("dg-hdl-ml"),u=s[0].classList.contains("dg-hdl-mr");!c||l||u||(c.style.width="".concat(e.clientWidth,"px"));var f=1,h=s.is(n.tl)||s.is(n.ml)||s.is(n.bl)||s.is(n.tc),d=s.is(n.tl)||s.is(n.tr)||s.is(n.tc)||s.is(n.ml);(s.is(n.tr)||s.is(n.bl))&&(f=-1);var p=O(n.tl[0]),g=O(n.tr[0]),b=Math.atan2(g.top-p.top,g.left-p.left)*f,y=parseFloat(R(o.style.width,i.css("width"))),m=parseFloat(R(o.style.height,i.css("height"))),v=C(A(o)),w=L(v[4],v[5],y,m,b,h,d),x=O(o),X=x.left+y/2,M=x.top+m/2,Y=Math.atan2(t.pageY-M,t.pageX-X),k=A(e),S=e.style,_={top:q(S.top||k.css("top")),left:q(S.left||k.css("left")),width:q(S.width||k.css("width")),height:q(S.height||k.css("height"))},E=C(i);return{parentScale:[E[0],E[3]],transform:v,cw:y,ch:m,center:{x:X,y:M},left:T(v[4],a.x),top:T(v[5],a.y),coordY:w.top,coordX:w.left,factor:f,pressang:Y,refang:b,revX:h,revY:d,handle:s,onTopEdge:s.is(n.tl)||s.is(n.tc)||s.is(n.tr),onLeftEdge:s.is(n.tl)||s.is(n.ml)||s.is(n.bl),onRightEdge:s.is(n.tr)||s.is(n.mr)||s.is(n.br),onBottomEdge:s.is(n.br)||s.is(n.bc)||s.is(n.bl),dimens:_}}function U(t,e,r,n){var o=this.el,i=this.storage,a=i.controls,s=i.handle,c=i.snap,l=i.left,u=i.top,f=i.coordX,h=i.coordY,d=i.refang,p=i.dimens,g=i.parent,b=i.transform,y=a.style;null!==t&&(y.width="".concat(D(t,c.x),"px"));var m=s[0].classList.contains("dg-hdl-br")||s[0].classList.contains("dg-hdl-tr")||s[0].classList.contains("dg-hdl-bl")||s[0].classList.contains("dg-hdl-tl"),v=!1,w=o.querySelector(".text-container");w&&m&&(v=!0);var x=i.ch/i.cw;if(null!==e&&((!i.shiftKey&&H||v)&&m&&(e=t*x),y.height="".concat(D(e,c.y),"px")),w&&(s[0].classList.contains("dg-hdl-mr")||s[0].classList.contains("dg-hdl-ml"))){var X=0;[].forEach.call(w.querySelectorAll(".simple-text-line"),function(t){X+=t.clientHeight||t.offsetHeight}),y.height="".concat(D(X||w.parentNode.clientHeight,c.y),"px")}var M=L(l,u,y.width,y.height,d,r,n),Y=u-(M.top-h),k=l-(M.left-f),S=F(b);v&&(w.style.transformOrigin="top left",w.style.transform="scale(".concat(parseFloat(y.width)/i.cw,")")),S[4]=k,S[5]=Y;var _=$(S);A(a).css(_),_.width=B(y.width,g.css("width"),p.width),_.height=B(y.height,g.css("height"),p.height);var E={width:_.width,height:_.height};A(o).css(_),window.parent.postMessage({event:"resize-from-package",size:E,isText:v},"http://127.0.0.1:3978/#/edit"),i.cached=S}function W(t,e){var r=this.el,n=this.storage,o=n.controls,i=n.transform,a=n.snap,s=F(i),c={elDrag:r,elDragContainer:document.querySelector("body")};if(c.elDrag.name&&c.elDrag.name.match("fullscreen"))c.elDragClient={left:Math.floor(+c.elDrag.name.split("/")[1]),right:Math.floor(+c.elDrag.name.split("/")[2]),top:Math.floor(+c.elDrag.name.split("/")[3]),bottom:Math.floor(+c.elDrag.name.split("/")[4])},(c.elDragClient.left||Math.abs(Math.floor(c.elDragClient.right+2))-Math.floor(c.elDragContainer.clientWidth))&&(0<e&&c.elDragClient.left?Math.abs(c.elDragClient.left)>Math.abs(e)?s[4]=D(i[4]+Math.floor(e),a.x):s[4]=D(i[4]+Math.abs(c.elDragClient.left),a.x):e<=0&&Math.floor(c.elDragClient.right-2)-Math.floor(c.elDragContainer.clientWidth)&&(0<Math.abs(Math.floor(c.elDragClient.right))-Math.floor(c.elDragContainer.clientWidth)-Math.abs(e)?s[4]=D(i[4]+e,a.x):s[4]=D(i[4]-(Math.abs(Math.floor(c.elDragClient.right))-Math.floor(c.elDragContainer.clientWidth)),a.x))),c.elDragClient.top&&(0<t&&c.elDragClient.top?Math.abs(c.elDragClient.top)>Math.abs(t)?s[5]=D(i[5]+Math.floor(t),a.y):s[5]=D(i[5]+Math.abs(c.elDragClient.top),a.y):e<=0&&Math.floor(c.elDragClient.bottom-2)-Math.floor(c.elDragContainer.clientHeight)&&(0<Math.abs(Math.floor(c.elDragClient.bottom))-Math.floor(c.elDragContainer.clientHeight)-Math.abs(t)?s[5]=D(i[5]+t,a.y):s[5]=D(i[5]-(Math.abs(Math.floor(c.elDragClient.bottom))-Math.floor(c.elDragContainer.clientHeight)),a.y)));else{var l=n.activeElement.getBoundingClientRect(),u={left:l.left,top:l.top,right:l.right,bottom:l.bottom,centerX:l.left+l.width/2,centerY:l.top+l.height/2};s[4]=D(i[4]+Z(n,e,u,"left"),a.x),s[5]=D(i[5]+Z(n,t,u,"top"),a.y)}var f=$(s);A(o).css(f),A(r).css(f),n.cached=s}function K(t,e,r){return null==r&&(r=5),Array.from(t).find(function(t){return Math.abs(t-e)<r})}function Q(t,e,n){var o=[e];return t.map(function(t){var e,r;o="left"===n?o.concat(Object.values({left:(r=t).left,right:r.right,centerX:r.centerX})):o.concat(Object.values({top:(e=t).top,bottom:e.bottom,centerY:e.centerY}))}),o}function Z(t,e,r,n){for(var o,i,a=function(t,e){for(var r={left:!1,centerX:!1,right:!1,top:!1,centerY:!1,bottom:!1},n={},o=[],i=[],a={leftSide:K(t,e.left),centerElementSideX:K(t,e.centerX),rightSide:K(t,e.right),topSide:K(t,e.top),bottomSide:K(t,e.bottom),centerElementSideY:K(t,e.centerY)},s=0,c=Object.entries(a);s<c.length;s++){var l=v(c[s],2),u=l[0];if(l[1])switch(u){case"leftSide":n.left=a.leftSide,r.left=!0,o.push(+a.leftSide-+e.left);break;case"centerElementSideX":n.centerX=a.centerElementSideX,r.centerX=!0,o.push(+a.centerElementSideX-+e.centerX);break;case"rightSide":n.right=a.rightSide,r.right=!0,o.push(+a.rightSide-+e.right);break;case"topSide":n.top=a.topSide,r.top=!0,i.push(+a.topSide-+e.top);break;case"centerElementSideY":n.centerY=a.centerElementSideY,r.centerY=!0,i.push(+a.centerElementSideY-+e.centerY);break;case"bottomSide":n.bottom=a.bottomSide,r.bottom=!0,i.push(+a.bottomSide-+e.bottom)}}return{config:r,coorditates:n,diffX:o.length?Math.min.apply(null,o):10,diffY:i.length?Math.min.apply(null,i):10}}("left"===n?t.verticalCoordinates:t.horizontalCoordinates,r),s="left"===n?{left:(i=a.coorditates).left,right:i.right,centerX:i.centerX}:{top:(o=a.coorditates).top,bottom:o.bottom,centerY:o.centerY},c="left"===n?function(t,e,r){I.normalizeX=I.newPositionX-r,I.newPositionX=r;for(var n=0,o=Object.entries(t);n<o.length;n++){var i=v(o[n],2);i[0];!i[1]||I.stopDragX||I.tempPositionX||I.stopDragX?5<=Math.abs(I.newPositionX-I.tempPositionX)&&I.stopDragX&&(I.stopDragX=!1,I.normalizeX=0,I.tempPositionX=0):(I.stopDragX=!0,I.newPositionX+=e+I.normalizeX,I.tempPositionX=I.newPositionX)}return I.stopDragX?I.tempPositionX:I.newPositionX}(s,a.diffX,e):function(t,e,r){I.normalizeY=I.newPositionY-r,I.newPositionY=r;for(var n=0,o=Object.entries(t);n<o.length;n++){var i=v(o[n],2);i[0];!i[1]||I.stopDragY||I.tempPositionY?5<=Math.abs(I.newPositionY-I.tempPositionY)&&I.stopDragY&&(I.stopDragY=!1,I.normalizeY=0,I.tempPositionY=0):(I.stopDragY=!0,I.newPositionY+=e+I.normalizeY,I.tempPositionY=I.newPositionY)}return I.stopDragY?I.tempPositionY:I.newPositionY}(s,a.diffY,e),l=0,u=Object.entries(s);l<u.length;l++){var f=v(u[l],2),h=f[0],d=f[1];d&&Math.abs(d-r[h])<2.5?(t.guidlines[h].style.display="block",t.guidlines[h].style[n]="".concat(parseInt(d),"px"),t.guidlines[h].style["left"===n?"borderLeft":"borderTop"]=d===t.screenCenterY||d===t.screenCenterX?"1.5px solid rgba(51, 122, 255, 0.51)":"1.5px dotted rgba(51, 122, 255, 0.51)"):t.guidlines[h].style.display="none"}return c}function G(t){var e=this.el,r=this.storage,n=r.controls,o=r.transform,i=r.refang,a=r.snap,s=F(o),c=D(i+t,a.angle);s[0]=b(Math.cos(c)),s[1]=b(Math.sin(c)),s[2]=-b(Math.sin(c)),s[3]=b(Math.cos(c)),window.parent.postMessage({event:"rotate-from-resizer",value:c*(180/Math.PI)},"http://127.0.0.1:3978/#/edit");var l=$(s);A(n).css(l),A(e).css(l),r.cached=s}function $(t){var e="matrix(".concat(t.join(),")");return{transform:e,webkitTranform:e,mozTransform:e,msTransform:e,otransform:e}}function Gt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(t){J(e,t,r[t])})}return e}function J(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $t(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var tt=/([achlmqstvz])([^achlmqstvz]*)/gi,et=/\s*,\s*|\s+/g;function Jt(t){for(var e=tt.lastIndex=0,r=[];e=tt.exec(t);){var n=e[1],o=n.toUpperCase();r.push({relative:n!==o,key:o,cmd:n,value:e[2].trim().split(et).map(function(t){if(!isNaN(t))return Number(t)})})}return r}function te(t,e,r,n){return t+e*(Math.abs(t-r)/n)}function ee(t,e,r){return t+e*(t/r)}function re(t){return!0===t?-1:1}function dt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(t){rt(e,t,r[t])})}return e}function rt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nt(t){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ot(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function it(t,e){return!e||"object"!==nt(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function at(t){return(at=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function st(t,e){return(st=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ct=25,lt=/[+-]?\d+(\.\d+)?/g,ut=/translate\(.*\)(.*)translate\(.*\)|$/,ft=function(){function o(t,e,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(n=it(this,at(o).call(this,t,r))).enable(e),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&st(t,e)}(o,m),function(t,e,r){e&&ot(t.prototype,e),r&&ot(t,r)}(o,[{key:"_init",value:function(t,e){(function(t){var r=mt("g");t.parentNode.appendChild(r);var e=t.getBBox(),n=e.width,o=e.height,i=e.x,a=e.y,s=t.getAttribute("transform")||"translate(0 0)",c=mt("rect");[["width",n],["height",o],["x",i],["y",a],["fill","transparent"],["stroke","#00a8ff"],["stroke-dasharray","3 3"],["transform",s]].forEach(function(t){c.setAttribute(t[0],t[1])});var l=mt("g");l.appendChild(c),r.appendChild(l);var u={tl:[i,a],tr:[i+n,a],br:[i+n,a+o],bl:[i,a+o],tc:[i+n/2,a],bc:[i+n/2,a+o],ml:[i,a+o/2],mr:[i+n,a+o/2],rotator:[i+n/2,a-ct]};Object.keys(u).forEach(function(t){var e=u[t];u[t]=function(t,e,r){var n=mt("circle"),o={cx:t,cy:e,r:6,fill:"white",stroke:"#00a8ff",transform:r};return Object.keys(o).map(function(t){n.setAttribute(t,o[t])}),n}(e[0],e[1],s),r.appendChild(mt("g").appendChild(u[t]).parentNode)}),Object.assign(this.storage,{wrapper:r,box:c,handles:u,parent:r.parentNode}),A(r).on("mousedown",this._onMouseDown).on("touchstart",this._onTouchStart)}).call(this,t,e)}},{key:"_destroy",value:function(t){(function(){var t=this.storage.wrapper;A(t).off("mousedown",this._onMouseDown).off("touchstart",this._onTouchStart),this.el.parentNode.removeChild(t)}).call(this,t)}},{key:"_drag",value:function(){bt.call.apply(bt,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"_rotate",value:function(){yt.call.apply(yt,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"_resize",value:function(){gt.call.apply(gt,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"_compute",value:function(){return pt.call.apply(pt,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"_apply",value:function(t){var e=this,r=this.storage,n=r.box,o=r.handles,i=r.refang,a=r.factor,s=r.wrapper,c=r.cached,l=r.transform,u=P(s.getAttribute("transform")||"translate(0 0)").translate,f=n.getBBox(),h=f.x,d=f.y,p=f.width,g=f.height,b=u[0],y=u[1],m=h+b,v=d+y,w=m+p/2,x=v+g/2;if("rotate"!==t&&vt(n,o,{x:m,y:v,width:p,height:g,angle:i*a}),"drag"===t){if(0===b&&0===y)return;s.removeAttribute("transform");var X=[];"g"===this.el.tagName.toLowerCase()?(this.el.childNodes.forEach(function(t){1===t.nodeType&&X.push(t)}),this.el.removeAttribute("transform")):X.push(this.el),X.forEach(function(t){!function(e,t){var r=t.x,n=t.y,o=t.angle,i=t.centerX,a=t.centerY,s=[["transform","rotate(".concat(o," ").concat(i," ").concat(a,")")]];switch(e.tagName.toLowerCase()){case"text":case"rect":var c=Number(e.getAttribute("x"))+r,l=Number(e.getAttribute("y"))+n;s.push(["x",c],["y",l]);break;case"circle":case"ellipse":var u=Number(e.getAttribute("cx"))+r,f=Number(e.getAttribute("cy"))+n;s.push(["cx",u],["cy",f]);break;case"line":var h=Number(e.getAttribute("x1"))+r,d=Number(e.getAttribute("y1"))+n,p=Number(e.getAttribute("x2"))+r,g=Number(e.getAttribute("y2"))+n;s.push(["x1",h],["y1",d],["x2",p],["y2",g]);break;case"polygon":case"polyline":var b=wt(e.getAttribute("points")).map(function(t){return t[0]=Number(t[0])+r,t[1]=Number(t[1])+n,t.join(" ")}).join(" ");s.push(["points",b]);break;case"path":var y=e.getAttribute("d");s.push(["d",function(t){for(var e=t.path,r=t.x,n=t.y,o=Jt(e),i="",a=!0,s=0,c=o.length;s<c;s++){var l=o[s],u=l.value,f=l.key,h=l.relative;switch(f){case"M":if(h&&!a)break;u[0]=u[0]+r,u[1]=u[1]+n;break;case"A":if(h)break;u[5]=u[5]+r,u[6]=u[6]+n;break;case"C":if(h)break;u[0]=u[0]+r,u[1]=u[1]+n,u[2]=u[2]+r,u[3]=u[3]+n,u[4]=u[4]+r,u[5]=u[5]+n;break;case"H":if(h)break;u[0]=u[0]+r;break;case"V":if(h)break;u[0]=u[0]+n;break;case"L":case"T":if(h)break;u[0]=u[0]+r,u[1]=u[1]+n;break;case"Q":case"S":if(h)break;u[0]=u[0]+r,u[1]=u[1]+n,u[2]=u[2]+r,u[3]=u[3]+n;break;case"Z":u[0]=""}i+=l.cmd+l.value.join(",")+" ",a=!1}return i}({path:y,x:r,y:n})])}s.forEach(function(t){e.setAttribute(t[0],t[1])})}(t,{x:b,y:y,angle:i*a*ht,centerX:w,centerY:x})})}if("resize"===t){if(j(c))return;var M=[],Y=c.revX,k=c.revY,S=c.scaleX,_=c.scaleY,E=c.diffX,A=c.diffY,O=!1;"g"===this.el.tagName.toLowerCase()?(this.el.childNodes.forEach(function(t){1===t.nodeType&&M.push(t)}),O=!0):M.push(this.el),M.forEach(function(t){!function(e,t){var r=t.scaleX,n=t.scaleY,o=t.diffX,i=t.diffY,a=t.revX,s=t.revY,c=t.angle,l=t.centerX,u=t.centerY,f=t.bBox,h=t.store,d=h.onRightEdge,p=h.onLeftEdge,g=h.onTopEdge,b=h.onBottomEdge,y=h.center,m=f.x,v=f.y,w=f.width,x=f.height,X=0,M=0;d&&(X=m);p&&(X=m+w);g&&(M=v+x);b&&(M=v);var Y={centerX:y.left,centerY:y.top,newCenterX:l,newCenterY:u,angle:c},k=[["transform","rotate(".concat(c*ht," ").concat(l," ").concat(u,")")]];switch(e.tagName.toLowerCase()){case"text":var S=Number(e.getAttribute("x")),_=Number(e.getAttribute("y")),E=Zt(dt({x:te(S,o,X,w),y:te(_,i,M,x)},Y)),A=E.resX,O=E.resY;k.push(["x",A+(r<0?w:0)],["y",O+(n<0?x:0)]);break;case"circle":var j=Number(e.getAttribute("r")),P=Number(e.getAttribute("cx")),C=Number(e.getAttribute("cy")),D=j*(Math.abs(r)+Math.abs(n))/2,T=Zt(dt({x:te(P,o,X,w),y:te(C,i,M,x)},Y)),N=T.resX,L=T.resY;k.push(["r",D],["cx",N],["cy",L]);break;case"rect":var z=Number(e.getAttribute("width")),R=Number(e.getAttribute("height")),B=Number(e.getAttribute("x")),q=Number(e.getAttribute("y")),F=Zt(dt({x:te(B,o,X,w),y:te(q,i,M,x)},Y)),I=F.resX,H=F.resY,V=z*Math.abs(r),U=R*Math.abs(n);k.push(["x",I-(r<0?V:0)],["y",H-(n<0?U:0)],["width",V],["height",U]);break;case"ellipse":var W=Number(e.getAttribute("rx")),K=Number(e.getAttribute("ry")),Q=Number(e.getAttribute("cx")),Z=Number(e.getAttribute("cy")),G=Zt(dt({x:te(Q,o,X,w),y:te(Z,i,M,x)},Y)),$=G.resX,J=G.resY;k.push(["rx",W*Math.abs(r)],["ry",K*Math.abs(n)],["cx",$],["cy",J]);break;case"line":var tt=Number(e.getAttribute("x1")),et=Number(e.getAttribute("y1")),rt=Number(e.getAttribute("x2")),nt=Number(e.getAttribute("y2")),ot=Zt(dt({x:te(tt,o,X,w),y:te(et,i,M,x)},Y)),it=ot.resX,at=ot.resY,st=Zt(dt({x:te(rt,o,X,w),y:te(nt,i,M,x)},Y)),ct=st.resX,lt=st.resY;k.push(["x1",it],["y1",at],["x2",ct],["y2",lt]);break;case"polygon":case"polyline":var ut=wt(e.getAttribute("points")).map(function(t){var e=Zt(dt({x:te(Number(t[0]),o,X,w),y:te(Number(t[1]),i,M,x)},Y)),r=e.resX,n=e.resY;return t[0]=r,t[1]=n,t.join(" ")}).join(" ");k.push(["points",ut]);break;case"path":var ft=e.getAttribute("d");k.push(["d",function(t){for(var e=t.bBox,r=t.path,n=t.baseData,o=t.dx,i=t.dy,a=t.revX,s=t.revY,c=t.fixedX,l=t.fixedY,u=Jt(r),f=e.width,h=e.height,d="",p=[],g=!0,b=0,y=u.length;b<y;b++){var m=u[b],v=m.value,w=m.key,x=m.relative;switch(w){case"A":var X=$t(v,7),M=X[0],Y=X[1],k=X[2],S=X[3],_=X[4],E=X[5],A=X[6],O=re(a),j=re(s),P=[],C=M+o*O*(M/f),D=Y+i*j*(Y/h);if(P.push(C,D,k,S,_),x)P.push(ee(E,o*O,f),ee(A,i*j,h));else{var T=Zt(Gt({x:te(E,o,c,f),y:te(A,i,l,h)},n)),N=T.resX,L=T.resY;P.push(N,L)}p.push(P);break;case"C":var z=$t(v,6),R=z[0],B=z[1],q=z[2],F=z[3],I=z[4],H=z[5];if(x){var V=re(a),U=re(s);p.push([ee(R,o*V,f),ee(B,i*U,h),ee(q,o*V,f),ee(F,i*U,h),ee(I,o*V,f),ee(H,i*U,h)])}else{var W=s&&l<B||!s&&B<l?-1:1,K=a&&c<q||!a&&q<c?-1:1,Q=s&&l<F||!s&&F<l?-1:1,Z=Zt(Gt({x:te(R,o*(a&&c<R||!a&&R<c?-1:1),c,f),y:te(B,i*W,l,h)},n)),G=Z.resX,$=Z.resY,J=Zt(Gt({x:te(q,o*K,c,f),y:te(F,i*Q,l,h)},n)),tt=J.resX,et=J.resY,rt=Zt(Gt({x:te(I,o,c,f),y:te(H,i,l,h)},n)),nt=rt.resX,ot=rt.resY;p.push([G,$,tt,et,nt,ot])}break;case"H":if(x){var it=re(a);p.push([ee(v[0],o*it,f)])}else{var at=Zt(Gt({x:te(v[0],o,c,f),y:0},n)).resX;p.push([at])}break;case"V":if(x){var st=re(s);p.push([ee(v[0],i*st,h)])}else{var ct=Zt(Gt({x:0,y:te(v[0],i,l,h)},n)).resY;p.push([ct])}break;case"T":case"L":if(x){var lt=re(a),ut=re(s);p.push([ee(v[0],o*lt,f),ee(v[1],i*ut,h)])}else{var ft=Zt(Gt({x:te(v[0],o,c,f),y:te(v[1],i,l,h)},n)),ht=ft.resX,dt=ft.resY;p.push([ht,dt])}break;case"M":var pt=$t(v,2),gt=pt[0],bt=pt[1];if(x&&!g){var yt=re(a),mt=re(s);p.push([ee(gt,o*yt,f),ee(bt,i*mt,h)])}else{var vt=Zt(Gt({x:te(gt,o,c,f),y:te(bt,i,l,h)},n)),wt=vt.resX,xt=vt.resY;p.push([wt,xt])}break;case"Q":var Xt=$t(v,4),Mt=Xt[0],Yt=Xt[1],kt=Xt[2],St=Xt[3];if(x){var _t=re(a),Et=re(s);p.push([ee(Mt,o*_t,f),ee(Yt,i*Et,h),ee(kt,o*_t,f),ee(St,i*Et,h)])}else{var At=s&&l<Yt||!s&&Yt<l?-1:1,Ot=Zt(Gt({x:te(Mt,o*(a&&c<Mt||!a&&Mt<c?-1:1),c,f),y:te(Yt,i*At,l,h)},n)),jt=Ot.resX,Pt=Ot.resY,Ct=Zt(Gt({x:te(kt,o,c,f),y:te(St,i,l,h)},n)),Dt=Ct.resX,Tt=Ct.resY;p.push([jt,Pt,Dt,Tt])}break;case"S":var Nt=$t(v,4),Lt=Nt[0],zt=Nt[1],Rt=Nt[2],Bt=Nt[3];if(x){var qt=re(a),Ft=re(s);p.push([ee(Lt,o*qt,f),ee(zt,i*Ft,h),ee(Rt,o*qt,f),ee(Bt,i*Ft,h)])}else{var It=s&&l<zt||!s&&zt<l?-1:1,Ht=Zt(Gt({x:te(Lt,o*(a&&c<Lt||!a&&Lt<c?-1:1),c,f),y:te(zt,i*It,l,h)},n)),Vt=Ht.resX,Ut=Ht.resY,Wt=Zt(Gt({x:te(Rt,o,c,f),y:te(Bt,i,l,h)},n)),Kt=Wt.resX,Qt=Wt.resY;p.push([Vt,Ut,Kt,Qt])}break;case"Z":p.push([""])}d+=m.cmd+p[b].join(",")+" ",g=!1}return d}({bBox:f,path:ft,baseData:Y,dx:o,dy:i,revX:a,revY:s,fixedX:X,fixedY:M})])}k.forEach(function(t){e.setAttribute(t[0],t[1])})}(t,{scaleX:S,scaleY:_,diffX:E*re(Y),diffY:A*re(k),revX:Y,revY:k,angle:i*a,factor:a,centerX:w,centerY:x,bBox:!0===O?l.bBox:t.getBBox(),store:e.storage})}),this.storage.cached=null}}},{key:"onRefreshState",value:function(e){var r=this.storage,n=function(t){var e=t.factor,r=t.revX,n=t.revY,o=this.storage,i=o.box,a=o.handles,s=o.snap,c=O(a.tl),l=O(a.tr),u=Math.atan2(l.y-c.y,l.x-c.x)*e,f=i.getBBox(),h=f.width,d=f.height,p=f.x,g=f.y,b=L(p,g,h,d,u,r,n),y=O(i);return{transform:{orig:this.el.getAttribute("transform"),value:i.getAttribute("transform"),scaleX:r?h+p:p,scaleY:n?d+g:g,bBox:f},cw:h,ch:d,center:{x:y.left+h/2,y:y.top+d/2,left:p+h/2,top:g+d/2},left:T(p,s.x),top:T(g,s.y),coordX:b.left,coordY:b.top,factor:e,refang:u}}.call(this,e);Object.keys(e).forEach(function(t){r[t]=e[t]}),Object.keys(n).forEach(function(t){r[t]=n[t]})}}]),o}();function pt(t){var e=this.storage,r=e.box,n=e.handles,o=e.snap,i=e.parent,a=A(t.target),s=1,c=a.is(n.tl)||a.is(n.ml)||a.is(n.bl)||a.is(n.tc),l=a.is(n.tl)||a.is(n.tr)||a.is(n.tc)||a.is(n.ml);(a.is(n.tr)||a.is(n.bl))&&(s=-1);var u=O(n.tl),f=O(n.tr),h=Math.atan2(f.top-u.top,f.left-u.left)*s,d=r.getBBox(),p=d.width,g=d.height,b=d.x,y=d.y,m=L(b,y,p,g,h,c,l),v=O(r),w=v.left+p/2,x=v.top+g/2,X=Math.atan2(t.pageY-x,t.pageX-w),M=a.is(n.tl)||a.is(n.tc)||a.is(n.tr),Y=a.is(n.tl)||a.is(n.ml)||a.is(n.bl),k=a.is(n.tr)||a.is(n.mr)||a.is(n.br),S=a.is(n.br)||a.is(n.bc)||a.is(n.bl);return{transform:{orig:this.el.getAttribute("transform"),value:r.getAttribute("transform"),scaleX:c?p+b:b,scaleY:l?g+y:y,bBox:d},parentScale:P(i.getAttribute("transform")||"scale(1 1)").scale,cw:p,ch:g,center:{x:v.left+p/2,y:v.top+g/2,left:b+p/2,top:y+g/2},left:T(b,o.x),top:T(y,o.y),coordX:m.left,coordY:m.top,factor:s,pressang:X,refang:h,revX:c,revY:l,handle:a,onTopEdge:M,onLeftEdge:Y,onRightEdge:k,onBottomEdge:S}}function gt(t,e,r,n){var o=this.storage,i=o.box,a=o.handles,s=o.snap,c=o.left,l=o.top,u=o.coordX,f=o.coordY,h=o.refang,d=o.factor,p=o.cw,g=o.ch,b=o.transform,y=this.el,m=Number(i.getAttribute("width")),v=Number(i.getAttribute("height"));if(null!==t&&(m=D(t,s.x)),null!==e&&(v=D(e,s.y)),!(Math.abs(m)<2||Math.abs(v)<2)){var w=L(c,l,m,v,h,r,n),x=l-(w.top-f);vt(i,a,{x:c-(w.left-u),y:x,width:m,height:v,angle:h*d});var X=m/p,M=v/g;this.storage.cached={scaleX:X,scaleY:M,diffX:m-p,diffY:v-g,revX:r,revY:n};var Y=b.scaleX,k=b.scaleY,S="translate(".concat(Y," ").concat(k,") scale(").concat(X," ").concat(M,") translate(").concat(-Y," ").concat(-k,")");if("g"===y.tagName.toLowerCase())y.childNodes.forEach(function(t){if(1===t.nodeType){var e=t.getAttribute("transform")||"";t.setAttribute("transform",e.replace(ut,S))}});else{var _=y.getAttribute("transform")||"";y.setAttribute("transform",_.replace(ut,S))}}}function bt(t,e){var r=this.storage,n=r.snap,o=r.transform,i=r.wrapper,a=o.orig||"",s=D(e,n.x),c=D(t,n.y),l="translate(".concat(s," ").concat(c,")"),u=a.replace(/translate\(.+\)|^/,l);i.setAttribute("transform",l),this.el.setAttribute("transform",u)}function yt(t){var e=this.storage,r=e.refang,n=e.snap,o=e.center,i=e.box,a=e.handles,s=D(r+t,n.angle),c="rotate(".concat(s*ht," ").concat(o.left," ").concat(o.top,")");i.setAttribute("transform",c),Object.keys(a).forEach(function(t){a[t].setAttribute("transform",c)}),"g"===this.el.tagName.toLowerCase()?this.el.childNodes.forEach(function(t){1===t.nodeType&&t.setAttribute("transform",c)}):this.el.setAttribute("transform",c)}function mt(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function vt(e,r,t){var n=t.x,o=t.y,i=t.width,a=t.height,s=t.angle,c=i/2,l=a/2,u="rotate(".concat(s*ht," ").concat(n+c," ").concat(o+l,")"),f={tl:[n,o],ml:[n,o+l],bl:[n,o+a],tc:[n+c,o],tr:[n+i,o],mr:[n+i,o+l],br:[n+i,o+a],bc:[n+c,o+a],rotator:[n+c,o-ct+(a<0?a:0)]},h={x:n+=i<0?i:0,y:o+=a<0?a:0,width:Math.abs(i),height:Math.abs(a),transform:u};Object.keys(h).forEach(function(t){e.setAttribute(t,h[t])}),Object.keys(r).forEach(function(t){var e=r[t];e.setAttribute("cx",f[t][0]),e.setAttribute("cy",f[t][1]),e.setAttribute("transform",u)})}function wt(t){return t.match(lt).reduce(function(t,e,r,n){return r%2==0&&t.push(n.slice(r,r+2)),t},[])}function xt(t){return(xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Mt(t,e){return!e||"object"!==xt(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Yt(t){return(Yt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function kt(t,e){return(kt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}
/* @license
 * Move/Rotate/Resize tool
 * Released under the MIT license, 2018-2019
 * nichollascarter@gmail.com
*/var St=function(){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Mt(this,Yt(e).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kt(t,e)}(e,f),function(t,e,r){e&&Xt(t.prototype,e),r&&Xt(t,r)}(e,[{key:"drag",value:function(t){return function(e){if(this.length){var r=new c;return i.call(this,function(t){return t instanceof SVGElement?new ft(t,e,r):new _(t,e,r)})}}.call(this,t)}}]),e}();e.default=function(t){return new St(t)}}]).default;
//# sourceMappingURL=subjx.js.map