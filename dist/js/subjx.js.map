{"version":3,"sources":["webpack://Subjx/webpack/bootstrap","webpack://Subjx/./src/js/core/util/util.js","webpack://Subjx/./src/js/core/observer/Observer.js","webpack://Subjx/./src/js/core/helper.js","webpack://Subjx/./src/js/core/util/css-util.js","webpack://Subjx/./src/js/core/transform/common.js","webpack://Subjx/./src/js/core/transform/subject.js","webpack://Subjx/./src/js/core/util/round.js","webpack://Subjx/./src/js/core/transform/html.js","webpack://Subjx/./src/js/core/transform/svg/path.js","webpack://Subjx/./src/js/core/transform/svg/index.js","webpack://Subjx/./src/js/index.js","webpack://Subjx/./src/js/core/transform/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","requestAnimFrame","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","f","setTimeout","cancelAnimFrame","cancelAnimationFrame","mozCancelAnimationFrame","requestID","clearTimeout","arrSlice","Array","forEach","slice","arrMap","map","warn","console","isDef","val","isUndef","Observable","_classCallCheck","this","observers","eventName","sub","obs","push","filter","subscriber","source","data","observer","onMove","onRotate","onResize","onApply","onRefreshState","Helper_","params","helper_classCallCheck","selector","document","querySelectorAll","length","count","nodeType","Subjx","_typeof","isArray","helper_createClass","prop","methods","setStyle","options","obj","len","style","_setStyle","getStyle","currentStyle","defaultView","getComputedStyle","includes","replace","_getStyle","apply","arguments","concat","node","sel","Helper","fn","arr","index","events","addEventListener","attachEvent","listenerDelegate","removeEventListener","detachEvent","_sel","el","evt","handler","act","doit","event","target","matches","parentNode","getOffset","getBoundingClientRect","getTransform","css","parseTransform","a","b","match","shift","item","Number","parseMatrix","transform","parseFloat","addClass","cls","classList","indexOf","add","split","cl","unitRE","RAD","Math","PI","DEG","recalcPoint","x","y","centerX","centerY","angle","newCenterX","newCenterY","oldCoords","getRotatedPoint","coords","nx","left","ny","top","resX","floatToFixed","resY","snapToGrid","snap","result","snapCandidate","gridSize","round","rotatedTopLeft","width","height","rotationAngle","revX","revY","cx","cy","dx","dy","rotatedTopLeftAngle","atan2","radius","sqrt","pow","cos","sin","ry","toPX","parent","test","fromPX","toUnit","getUnitDimension","toFixed","Subject","subject_classCallCheck","constructor","TypeError","storage","Ob","_onMouseDown","_onTouchStart","_onMouseMove","_onTouchMove","_onMouseUp","_onTouchEnd","_load","_init","remove","removeClass","_destroy","each","move","resize","rotate","_options$snap","_options$each","subscribe","drop","isFunc","e","ctx","animate","store","frame","doDraw","handle","handles","ch","cw","refang","pressang","pageX","pageY","center","parentScale","doDrag","doResize","doRotate","scaleX","scaleY","_store$each","moveEach","rotateEach","pos","is","br","mr","tl","ml","tr","tc","dox","doy","bl","bc","_resize","diffTop","diffLeft","_drag","notify","radians","_rotate","stopImmediatePropagation","computed","_compute","ctrlKey","shiftKey","keys","onRightEdge","onBottomEdge","onTopEdge","onLeftEdge","factor","rotator","_draw","preventDefault","action","_apply","_start","on","touches","_moving","guidLines","values","line","display","hieAllDuides","guidlines","_end","off","changedTouches","w","h","actionName","moveTowardsLength","movingPoint","targetPoint","amount","distance","moveTowardsFractional","min","pointForCommand","cmd","fraction","adjustCommand","newPoint","roundShape","pathString","useFractionalRadius","undefined","commands","pathParts","reduce","part","getPathPartsCommand","parts","getPathParts","resultCommands","startPoint","virtualCloseLine","cmdIndex","prevCmd","curCmd","nextCmd","prevPoint","curPoint","nextPoint","curveStart","curveEnd","origPoint","startControl","endControl","curveCmd","newStartPoint","str","join","guidLinesConfig","stopDragX","tempPositionX","stopDragY","tempPositionY","normalizeX","normalizeY","newPositionX","newPositionY","Draggable","_this","html_classCallCheck","window","handleEditorEvents","_possibleConstructorReturn","_getPrototypeOf","enable","wrapper","createElement","insertBefore","container","_parent","controls","querySelector","right","bottom","activeElement","isLockedLayer","dataset","locked","coordinates","activeElementCoordinates","activeElementConfig","element","config","screenCenterX","body","clientWidth","screenCenterY","clientHeight","innerHTML","appendChild","_controls","_container","svg","svgPath","rect","assign","verticalCoordinates","getArrayOfCoorditates","horizontalCoordinates","find","handleLayerLock","removeChild","processMove","processRotate","processResize","postMessage","_el","cached","dimens","matrix","_toConsumableArray","matrixToCSS","pW","pH","isTextDrag","contains","position","recalc","_this$storage","ctrls","tl_off","tr_off","styleList","parentTransform","coordX","coordY","thickness","leftSide","rightSide","offset_","center_x","center_y","canResizeWithShiftKey","isText","scaleHeight","newHeight","offsetHeight","resultY","resultX","transformOrigin","size","setAttribute","newPath","newRound","handleRectPath","props","elDrag","elDragContainer","elDragClient","floor","abs","activeElementClientRect","handleGuideLines","approxeq","numbers","controlNumber","epsilon","from","number","type","res","_ref2","_ref","_ref4","_ref3","linesConfig","elenentPositions","activeElemetPosition","coorditates","diffsX","diffsY","sides","centerElementSideX","topSide","bottomSide","centerElementSideY","_i","_Object$entries","entries","_Object$entries$_i","_slicedToArray","diffX","diffY","getGuidlinesConfig","linesCoordinates","resPosition","_i3","_Object$entries3","_Object$entries3$_i","stopDragHandlerX","_i4","_Object$entries4","_Object$entries4$_i","stopDragHandlerY","_i2","_Object$entries2","_Object$entries2$_i","parseInt","webkitTranform","mozTransform","msTransform","otransform","dRE","sepRE","parsePath","path","lastIndex","serialized","exec","upCmd","toUpperCase","relative","trim","isNaN","setCoord","diff","fixed","dist","setRelativeCoord","getFactor","ROT_OFFSET","floatRE","translateRE","DraggableSVG","svg_classCallCheck","svg_possibleConstructorReturn","svg_getPrototypeOf","createSVG","_sel$getBBox","getBBox","getAttribute","box","group","items","fill","stroke","createHandler","_this2","translate","_box$getBBox","newWidth","applyTransformToHandles","removeAttribute","els","tagName","toLowerCase","childNodes","attrs","resX1","resY1","resX2","resY2","parsePoints","firstCommand","movePath","applyTranslate","isGroup","bBox","boxX","boxY","boxW","boxH","fixedX","fixedY","baseData","_recalcPoint","svg_objectSpread","newR","_recalcPoint2","_recalcPoint3","rx","_recalcPoint4","_recalcPoint5","resX1_","resY1_","_recalcPoint6","resX2_","resY2_","_recalcPoint7","_values","path_slicedToArray","x_axis_rot","large_arc_flag","sweep_flag","factorX","factorY","newRx","newRy","_objectSpread","_values2","x1","y1","x2","y2","factorY1","factorX2","factorY2","resX3","resY3","_values3","_recalcPoint8","_values4","_recalcPoint9","_recalcPoint10","_values5","_recalcPoint11","_recalcPoint12","resizePath","attr","applyResize","_this$storage3","c_left","c_top","boxOffset","orig","_this$storage2","scale","_this$storage4","ptX","ptY","scaleString","oldTransform","_this$storage5","originTransform","transformString","newTransform","_this$storage6","hdl","createElementNS","halfWidth","halfHeight","boxAttrs","pts","array","js_classCallCheck","js_possibleConstructorReturn","js_getPrototypeOf","method","SVGElement","__webpack_exports__"],"mappings":"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","file":"js/subjx.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","export const requestAnimFrame = requestAnimationFrame ||\n        mozRequestAnimationFrame ||\n        webkitRequestAnimationFrame ||\n        msRequestAnimationFrame ||\n        function(f) {\n            return setTimeout(f, 1000 / 60);\n        };\n\nexport const cancelAnimFrame = cancelAnimationFrame ||\n        mozCancelAnimationFrame ||\n        function(requestID) {\n            clearTimeout(requestID);\n        };\n\nexport const forEach = Array.prototype.forEach,\n        arrSlice = Array.prototype.slice,\n        arrMap = Array.prototype.map,\n        warn = console.warn;\n\nexport function isDef(val) {\n    return val !== undefined && val !== null;\n}\n\nexport function isUndef(val) {\n    return val === undefined || val === null;\n}\n\nexport function isFunc(val) {\n    return typeof val === 'function';\n}","import { isUndef } from \"../util/util\";\n\nexport default class Observable {\n  \n    constructor() {\n        this.observers = {};\n    }\n  \n    subscribe(eventName, sub) {\n\n        const obs = this.observers;\n     \n        if (isUndef(obs[eventName])) {\n            Object.defineProperty(obs, eventName, {\n                value: []\n            });\n        }\n\n        obs[eventName].push(sub);\n    }\n  \n    unsubscribe(f) {\n       this.observers = this.observers.filter(subscriber => subscriber !== f);\n    }\n\n    notify(eventName, source, data) {\n        if (isUndef(this.observers[eventName])) return;\n\n        this.observers[eventName].forEach(observer => {\n            if (source === observer) return;\n            switch (eventName) {\n                case 'onmove':\n                    observer.onMove(data);\n                    break\n                case 'onrotate':\n                    observer.onRotate(data);\n                    break\n                case 'onresize':\n                    observer.onResize(data);\n                    break\n                case 'onapply':\n                    observer.onApply(data);\n                    break\n                case 'onrefreshstate':\n                    observer.onRefreshState(data);\n                    break\n                default: \n                    break\n            }\n        });\n    }\n}","import {\n    arrSlice,\n    warn\n} from './util/util'\n\nexport class Helper_ {\n\n    constructor(params) {\n\n        if (!params) return this;\n\n        if (typeof params === 'string') {\n            let selector = document.querySelectorAll(params);\n            this.length = selector.length;\n            for (let count = 0; count < this.length; count++) {\n                this[count] = selector[count];\n            }\n        } else if (params.nodeType === 1 || params === document) {\n            this[0] = params;\n            this.length = 1;\n        } else if (params instanceof Subjx || typeof params === 'object') {\n            this.length = params.length;\n            for (let count = 0; count < this.length; count++) {\n                this[count] = params[count];\n            }\n        } else if (Array.isArray(params)) {\n            this.length = 0;\n            for (let count = 0; count < this.length; count++) {\n                if (params.nodeType === 1) {\n                    this[count] = params[count];\n                    this.length++;\n                }\n            }\n        }\n        return this;\n    }\n\n    css(property) {\n        return _css.call(this, property);\n    }\n    find(node) {\n        return _find.call(this, node);\n    }\n    each(fn) {\n        return _each.call(this, fn);\n    }\n    on() {\n        return _on.apply(this, arguments);\n    }\n    off() {\n        return _off.apply(this, arguments);\n    }\n    is(selector) {\n        return _is.call(this, selector);\n    }\n}\n\nfunction _css(prop) {\n\n    const methods = {\n        setStyle(options) {\n            return _setStyle(this, options);\n        },\n\n        getStyle() {\n            return _getStyle(this);\n        }\n    };\n\n    if (typeof prop === 'string') {\n        return methods.getStyle.apply(this, arrSlice.call(arguments, 1));\n    } else if (typeof prop === 'object' || !prop) {\n        return methods.setStyle.apply(this, arguments);\n    } else {\n        warn(`Method ${prop} does not exist`);\n    }\n    return false;\n\n\n    function _getStyle(obj) {\n\n        let len = obj.length;\n\n        while (len--) {\n            if (obj[len].currentStyle) {\n                return obj[len].currentStyle[prop];\n            } else if (document.defaultView && document.defaultView.getComputedStyle) {\n                if (prop.includes('transform')) {\n                    const exponentRegexp180 = /-?1.22465e-16/g;\n                    const exponentRegexp90 = /6.12323e-17/g;\n                    return document.defaultView.getComputedStyle(obj[len], '')[prop].replace(exponentRegexp180, '0').replace(exponentRegexp90, '0');\n                }\n                return document.defaultView.getComputedStyle(obj[len], '')[prop];\n            } else {\n                return obj[len].style[prop];\n            }\n        }\n    }\n\n    function _setStyle(obj, options) {\n\n        let len = obj.length;\n\n        while (len--) {\n            for (let property in options) {\n                obj[len].style[property] = options[property];\n            }\n        }\n        return obj.style;\n    }\n}\n\nfunction _each(fn) {\n\n    const arr = arrSlice.call(this, 0);\n\n    for (let index = arr.length - 1; index >= 0; --index) {\n        let func = function() {\n            return arr[index];\n        };\n        fn.call(func());\n    }\n    return this;\n}\n\nfunction _find(sel) {\n\n    let len = this.length,\n        selector;\n\n    while (len--) {\n        selector = this[len].querySelectorAll(sel);\n        return Helper(selector);\n    }\n}\n\nfunction _on() {\n\n    let len = this.length;\n\n    while (len--) {\n\n        if (!this[len].events) {\n            this[len].events = {};\n            this[len].events[arguments[0]] = [];\n        }\n\n        if (arguments.length === 2) {\n\n            if (document.addEventListener) {\n                this[len].addEventListener(arguments[0], arguments[1], false);\n            } else if (document.attachEvent) {\n                this[len].attachEvent(`on${arguments[0]}`, arguments[1]);\n            } else {\n                this[len][`on${arguments[0]}`] = arguments[1];\n            }\n\n        } else if (arguments.length === 3 && typeof(arguments[1]) === 'string') {\n            listenerDelegate(this[len], arguments[0], arguments[1], arguments[2], true);\n        }\n    }\n    return this;\n}\n\nfunction _off() {\n\n    let len = this.length;\n\n    while (len--) {\n\n        if (!this[len].events) {\n            this[len].events = {};\n            this[len].events[arguments[0]] = [];\n        }\n\n        if (arguments.length === 2) {\n            if (document.removeEventListener) {\n                this[len].removeEventListener(arguments[0], arguments[1], false);\n            } else if (document.detachEvent) {\n                this[len].detachEvent(`on${arguments[0]}`, arguments[1]);\n            } else {\n                this[len][`on${arguments[0]}`] = null;\n            }\n\n        } else if (arguments.length === 3 && typeof(arguments[1]) === 'string') {\n            listenerDelegate(this[len], arguments[0], arguments[1], arguments[2], false);\n        }\n    }\n\n    return this;\n}\n\nfunction _is(selector) {\n\n    const _sel = Helper(selector);\n    let len = this.length;\n\n    while (len--) {\n        if (this[len] === _sel[len]) return true;\n    }\n    return false;\n}\n\nfunction listenerDelegate(el, evt, sel, handler, act) {\n\n    const doit = function(event) {\n        let t = event.target;\n        while (t && t !== this) {\n            if (t.matches(sel)) {\n                handler.call(t, event);\n            }\n            t = t.parentNode;\n        }\n    };\n\n    if (act === true) {\n        if (document.addEventListener) {\n            el.addEventListener(evt, doit, false);\n        } else if (document.attachEvent) {\n            el.attachEvent(`on${evt}`, doit);\n        } else {\n            el[`on${evt}`] = doit;\n        }\n    } else {\n        if (document.removeEventListener) {\n            el.removeEventListener(evt, doit, false);\n        } else if (document.detachEvent) {\n            el.detachEvent(`on${evt}`, doit);\n        } else {\n            el[`on${evt}`] = null;\n        }\n    }\n}\n\nexport function Helper(params) {\n    return new Helper_(params);\n}","export function getOffset(node) {\n    return node.getBoundingClientRect();\n}\n\nexport function getTransform(el) {\n    const transform = el.css('-webkit-transform') ||\n        el.css('-moz-transform') ||\n        el.css('-ms-transform') ||\n        el.css('-o-transform') ||\n        el.css('transform') ||\n        'none';\n    return transform;\n}\n\nexport function parseTransform(a) {\n    const b = {};\n\n    for (let i in a = a.match(/(\\w+\\((\\-?\\d+\\.?\\d*e?\\-?\\d*(?:,|\\s)?)+\\))+/g)) {\n        const c = a[i].match(/[\\w\\.\\-]+/g);\n        b[c.shift()] = c.map(item => { return Number(item); });\n    }\n    return b;\n}\n\nexport function parseMatrix(el) {\n    // matrix(scaleX(),skewY(),skewX(),scaleY(),translateX(),translateY())\n    const transform = getTransform(el).match(/-?\\d+\\.?\\d+|-?\\d+/g);\n\n    if (transform) {\n        return transform.map(item => {\n            return parseFloat(item);\n        });\n    } else {\n        return [1, 0, 0, 1, 0, 0];\n    }\n}\n\nexport function addClass(node, cls) {\n    if (!cls) return;\n\n    if (node.classList) {\n        if (cls.indexOf(' ') > -1) {\n            cls.split(/\\s+/).forEach(function(cl) {\n                return node.classList.add(cl);\n            });\n        } else {\n            return node.classList.add(cls);\n        }\n    }\n    return node;\n}\n\nexport function removeClass(node, cls) {\n    if (!cls) return;\n\n    if (node.classList) {\n        if (cls.indexOf(' ') > -1) {\n            cls.split(/\\s+/).forEach(function(cl) {\n                return node.classList.remove(cl);\n            });\n        } else {\n            return node.classList.remove(cls);\n        }\n    }\n    return node;\n}","export const unitRE = /px|em|%|ex|ch|rem|vh|vw|vmin|vmax|mm|cm|in|pt|pc|deg/;\nexport const RAD = Math.PI / 180;\nexport const DEG = 180 / Math.PI;\n\nexport function recalcPoint(params) {\n\n    const { \n        x, \n        y, \n        centerX,\n        centerY,\n        angle,\n        newCenterX,\n        newCenterY\n    } = params;\n\n    const oldCoords = getRotatedPoint(\n        centerX,\n        centerY,\n        x,\n        y,\n        angle,\n        false,\n        false\n    );\n\n    const coords = getRotatedPoint(\n        newCenterX,\n        newCenterY,\n        x,\n        y,\n        angle,\n        false,\n        false\n    );\n\n    const nx = x - (oldCoords.left - coords.left),\n        ny = y - (oldCoords.top - coords.top);\n\n    return {\n        resX: floatToFixed(nx),\n        resY: floatToFixed(ny)\n    }\n}\n\nexport function snapToGrid(value, snap) {\n    if (snap === 0) {\n        return value;\n    } else {\n        const result = snapCandidate(value, snap);\n\n        if (result - value < snap) {\n            return result;\n        }\n    }\n}\n\nexport function snapCandidate(value, gridSize) {\n    if (gridSize === 0) return value;\n    return gridSize * Math.round(value / gridSize);\n}\n\nexport function rotatedTopLeft(\n    x, \n    y, \n    width, \n    height, \n    rotationAngle, \n    revX, \n    revY\n) {\n\n    const cx = x + parseFloat(width) / 2,\n        cy = y + parseFloat(height) / 2;\n\n    const dx = x - cx,\n        dy = y - cy;\n\n    const originalTopLeftAngle = Math.atan2(dy, dx);\n\n    const rotatedTopLeftAngle = originalTopLeftAngle + rotationAngle;\n\n    const radius = Math.sqrt(Math.pow(parseFloat(width) / 2, 2) + Math.pow(parseFloat(height) / 2, 2));\n            \n    let cos = Math.cos(rotatedTopLeftAngle), \n        sin = Math.sin(rotatedTopLeftAngle);\n\n    cos = revX === true ? -cos : cos;\n    sin = revY === true ? -sin : sin;\n\n    const rx = cx + radius * cos,\n        ry = cy + radius * sin;\n\n    return {\n        left: floatToFixed(rx),\n        top: floatToFixed(ry)\n    }\n}\n\nexport function getRotatedPoint(\n    cx, \n    cy, \n    x, \n    y, \n    angle, \n    revX, \n    revY\n) {\n\n    let cos = Math.cos(angle),\n        sin = Math.sin(angle);\n\n    cos = revX === true ? -cos : cos;\n    sin = revY === true ? -sin : sin;\n\n    let nx = (cos * (x - cx)) + (sin * (y - cy)) + cx,\n        ny = (cos * (y - cy)) - (sin * (x - cx)) + cy;\n\n    return {\n        left: floatToFixed(nx),\n        top: floatToFixed(ny)\n    }\n}\n\nexport function toPX(value, parent) {\n    if (/px/.test(value)) {\n        return value;\n    }\n    if (/%/.test(value)) {\n        return `${parseFloat(value) * parseFloat(parent) / 100}px`;\n    }\n}\n\nexport function fromPX(value, parent, toUnit) {\n    if (/px/.test(toUnit)) {\n        return value;\n    }\n    if (/%/.test(toUnit)) {\n        return `${parseFloat(value) * 100 / parseFloat(parent)}%`;\n    }\n}\n\nexport function getUnitDimension(value) {\n    return value.match(unitRE)[0];\n}\n\nexport function floatToFixed(val) {\n    return Number(val.toFixed(6));\n}\n","import { Helper } from '../helper'\n\nimport {\n    requestAnimFrame,\n    cancelAnimFrame,\n    isDef,\n    isUndef,\n    isFunc\n} from '../util/util'\n\nimport {\n    addClass,\n    removeClass\n} from '../util/css-util'\n\nimport {\n    getRotatedPoint,\n    RAD\n} from './common'\n\nexport default class Subject {\n    \n    constructor(el, Observable) {\n        \n        if (this.constructor === Subject) {\n            throw new TypeError('Cannot construct Subject instances directly');\n        }\n        \n        this.el = el;\n        this.storage = null;\n        this.Ob = Observable;\n        \n        this._onMouseDown = this._onMouseDown.bind(this);\n        this._onTouchStart = this._onTouchStart.bind(this);\n        this._onMouseMove = this._onMouseMove.bind(this);\n        this._onTouchMove = this._onTouchMove.bind(this);\n        this._onMouseUp = this._onMouseUp.bind(this);\n        this._onTouchEnd = this._onTouchEnd.bind(this);\n    }\n    \n    enable(options) {\n        \n        if (isUndef(this.storage)) {\n            this._load(options);\n            this._init(this.el);\n        } else {\n            warn('Already enabled');\n        }\n    }\n    \n    disable() {\n        const {\n            storage,\n            el\n        } = this;\n        \n        if (isUndef(storage)) return;\n        \n        removeClass(el, 'dg-drag');\n        this._destroy();\n        \n        delete this.storage;\n    }\n    \n    _load(options) {\n        loadOptions.call(this, options);\n    }\n    \n    _draw() {\n        \n        const ctx = this;\n        \n        \n        function animate() {\n            const store = ctx.storage;\n            \n            store.frame = requestAnimFrame(animate);\n            \n            if (!store.doDraw) return;\n            store.doDraw = false;\n            \n            let {\n                handle,\n                handles,\n                cx,\n                cy,\n                ch,\n                cw,\n                refang,\n                pressang,\n                pageX,\n                pageY,\n                center,\n                snap,\n                parentScale,\n                doDrag,\n                doResize,\n                doRotate\n            } = store;\n            \n            const scaleX = parentScale[0],\n              scaleY = parentScale[1];\n            \n            let {\n                move: moveEach,\n                resize: resizeEach,\n                rotate: rotateEach\n            } = store.each;\n            \n            if (doResize) {\n                \n                let revX, revY, x, y, pos;\n                \n                let width = null,\n                  height = null;\n                \n                if (handle.is(handles.br) || handle.is(handles.mr)) {\n                    pos = getRotatedPoint(\n                      cx,\n                      cy,\n                      pageX,\n                      pageY,\n                      refang,\n                      false,\n                      false\n                    );\n                    pageY = pos.top;\n                    pageX = pos.left;\n                    \n                    y = (pageY - cy) / scaleY;\n                    x = (pageX - cx) / scaleX;\n                    \n                    let doy = handle.is(handles.br);\n                    \n                    if (doy) { height = y + ch; }\n                    width = x + cw;\n                    \n                    revX = false;\n                    revY = false;\n                    \n                } else if (handle.is(handles.tl) || handle.is(handles.ml)) {\n                    \n                    pos = getRotatedPoint(\n                      cx,\n                      cy,\n                      pageX,\n                      pageY,\n                      refang,\n                      false,\n                      false\n                    );\n                    pageY = pos.top;\n                    pageX = pos.left;\n                    \n                    y = - (pageY - cy) / scaleY;\n                    x = - (pageX - cx) / scaleX;\n                    \n                    let doy = handle.is(handles.tl);\n                    \n                    width = x + cw;\n                    if (doy) { height = y + ch; }\n                    \n                    revX = true;\n                    revY = true;\n                    \n                } else if (handle.is(handles.tr) || handle.is(handles.tc)) {\n                    \n                    let dox = handle.is(handles.tr);\n                    let doy = handle.is(handles.tc);\n                    \n                    pos = getRotatedPoint(\n                      cx,\n                      cy,\n                      pageX,\n                      pageY,\n                      refang,\n                      dox,\n                      false\n                    );\n                    \n                    pageY = pos.top;\n                    pageX = pos.left;\n                    \n                    y = - (pageY - cy) / scaleY;\n                    x = - (pageX - cx) / scaleX;\n                    \n                    if (dox) { y = -y; }\n                    \n                    height = y + ch;\n                    if (dox) { width = x + cw; }\n                    \n                    revX = doy;\n                    revY = true;\n                    \n                } else if (handle.is(handles.bl) || handle.is(handles.bc)) {\n                    \n                    let dox = handle.is(handles.bl);\n                    \n                    pos = getRotatedPoint(\n                      cx,\n                      cy,\n                      pageX,\n                      pageY,\n                      refang,\n                      false,\n                      dox\n                    );\n                    \n                    pageY = pos.top;\n                    pageX = pos.left;\n                    \n                    y = (pageY - cy) / scaleY;\n                    x = - (pageX - cx) / scaleX;\n                    \n                    height = y + ch;\n                    if (dox) { width = x + cw; }\n                    revX = dox;\n                    \n                    revY = false;\n                }\n                \n                \n                ctx._resize(\n                  width,\n                  height,\n                  revX,\n                  revY,\n                  x,\n                  y\n                );\n                \n                \n            }\n            \n            if (doDrag) {\n                \n                const diffTop = (pageY - cy) / scaleY,\n                  diffLeft = (pageX - cx) / scaleX;\n                \n                ctx._drag(\n                  diffTop,\n                  diffLeft,\n                );\n                \n                if (moveEach) {\n                    ctx.Ob.notify('onmove',\n                      ctx,\n                      {\n                          diffTop,\n                          diffLeft\n                      }\n                    );\n                }\n            }\n            \n            if (doRotate) {\n                \n                const radians = Math.atan2(\n                  pageY - center.y,\n                  pageX - center.x\n                ) - pressang;\n                \n                ctx._rotate(\n                  radians\n                );\n                \n                if (rotateEach) {\n                    ctx.Ob.notify('onrotate',\n                      ctx,\n                      {\n                          radians\n                      }\n                    );\n                }\n            }\n        }\n        animate();\n    }\n    \n    _start(e) {\n        \n        if (e.stopImmediatePropagation) {\n            e.stopImmediatePropagation();\n        }\n        \n        const store = this.storage;\n        const computed = this._compute(e);\n        \n        store.pageX = e.pageX;\n        store.pageY = e.pageY;\n        store.cx = e.pageX;\n        store.cy = e.pageY;\n        store.ctrlKey = e.ctrlKey;\n        store.shiftKey = e.shiftKey;\n        \n        Object.keys(computed).forEach(prop => {\n            store[prop] = computed[prop];\n        });\n        \n        const {\n            onRightEdge,\n            onBottomEdge,\n            onTopEdge,\n            onLeftEdge,\n            handle,\n            factor,\n            revX,\n            revY\n        } = computed;\n        \n        const doResize = onRightEdge ||\n          onBottomEdge ||\n          onTopEdge ||\n          onLeftEdge;\n        \n        const doRotate = handle.is(store.handles.rotator);\n        \n        store.doResize = doResize;\n        store.doDrag = !doRotate && !doResize;\n        store.doRotate = doRotate;\n        \n        if (this.Ob) {\n            this.Ob.notify(\n              'onrefreshstate',\n              this,\n              {\n                  factor,\n                  revX,\n                  revY,\n                  onTopEdge,\n                  onLeftEdge,\n                  onRightEdge,\n                  onBottomEdge\n              }\n            );\n        }\n        \n        this._draw();\n    }\n    \n    _moving(e) {\n        \n        if (e.preventDefault) {\n            e.preventDefault();\n        }\n        \n        const store = this.storage;\n        store.pageX = e.pageX;\n        store.pageY = e.pageY;\n        store.doDraw = true;\n    }\n    \n    _end(e) {\n        \n        if (e.stopImmediatePropagation) {\n            e.stopImmediatePropagation();\n        }\n        \n        const store = this.storage;\n        \n        const action = store.doResize ? 'resize' : (store.doDrag ? 'drag' : 'rotate');\n        \n        store.doResize = false;\n        store.doDrag = false;\n        store.doRotate = false;\n        store.doDraw = false;\n        \n        this._apply(action);\n        \n        if (this.Ob) {\n            this.Ob.notify(\n              'onapply',\n              this,\n              action\n            );\n        }\n        \n        cancelAnimFrame(store.frame);\n        store.drop.call(this, e);\n    }\n    \n    _onMouseDown(e) {\n        this._start(e);\n        Helper(document).on('mousemove', this._onMouseMove)\n          .on('mouseup', this._onMouseUp);\n    }\n    \n    _onTouchStart(e) {\n        this._start(e.touches[0]);\n        Helper(document).on('touchmove', this._onTouchMove)\n          .on('touchend', this._onTouchEnd);\n    }\n    \n    _onMouseMove(e) {\n        this._moving(e, this.el);\n    }\n    \n    _onTouchMove(e) {\n        this._moving(e.touches[0], this.el);\n    }\n    \n    _onMouseUp(e) {\n        hieAllDuides(this.storage.guidlines);\n        this._end(e, this.el);\n        Helper(document).off('mousemove', this._onMouseMove)\n          .off('mouseup', this._onMouseUp);\n    }\n    \n    _onTouchEnd(e) {\n        if (e.touches.length === 0) {\n            this._end(e.changedTouches[0], this.el);\n        }\n        Helper(document).off('touchmove', this._onTouchMove)\n          .off('touchend', this._onTouchEnd);\n    }\n    \n    onMove(data) {\n        \n        this._drag(\n          data.diffTop,\n          data.diffLeft\n        );\n    }\n    \n    onRotate(data) {\n        \n        this._rotate(\n          data.radians\n        );\n    }\n    \n    onResize(data) {\n        \n        const w = data.width !== null ? this.storage.cw + data.x : null;\n        const h = data.height !== null ? this.storage.ch + data.y : null;\n        \n        this._resize(\n          w,\n          h,\n          data.revX,\n          data.revY\n        );\n    }\n    \n    onApply(actionName) {\n        this._apply(actionName);\n    }\n}\n\nfunction hieAllDuides (guidLines) {\n    Object.values(guidLines).forEach(line => {\n        if (line) {\n            line.style.display = 'none';\n        }\n    })\n}\n\nfunction loadOptions(options) {\n    \n    addClass(this.el, 'dg-drag');\n    \n    let snap = {\n        x: 10,\n        y: 10,\n        angle: 10 * RAD\n    };\n    \n    let each = {\n        move: false,\n        resize: false,\n        rotate: false\n    }\n    \n    if (isDef(options)) {\n        \n        if (isDef(options.snap)) {\n            \n            const { x, y, angle } = options.snap;\n            \n            snap.x = isUndef(x) ? 10 : x;\n            snap.y = isUndef(y) ? 10 : y;\n            snap.angle = isUndef(angle) ? 1 * RAD : angle * RAD;\n        }\n        \n        if (isDef(options.each)) {\n            \n            const { move, resize, rotate } = options.each;\n            \n            each.move = move || false;\n            each.resize = resize || false;\n            each.rotate = rotate || false;\n        }\n    }\n    \n    const Ob = this.Ob;\n    \n    if (each.move || each.resize || each.rotate) {\n        Ob.subscribe('onrefreshstate', this);\n        Ob.subscribe('onapply', this);\n    }\n    \n    if (each.move) {\n        Ob.subscribe('onmove', this);\n    }\n    if (each.resize) {\n        Ob.subscribe('onresize', this);\n    }\n    if (each.rotate) {\n        Ob.subscribe('onrotate', this);\n    }\n    \n    this.storage = {\n        drop: options && isFunc(options.drop)\n          ? function(e) {\n              options.drop(e, this.el);\n          }\n          : function() {},\n        snap,\n        each\n    };\n}\n","export function moveTowardsLength(movingPoint, targetPoint, amount) {\n  var width = (targetPoint.x - movingPoint.x);\n  var height = (targetPoint.y - movingPoint.y);\n  \n  var distance = Math.sqrt(width*width + height*height);\n  \n  return moveTowardsFractional(movingPoint, targetPoint, Math.min(1, amount / distance));\n}\n\nexport function getPathParts (pathString) {\n  return pathString\n    .split(/[,\\s]/)\n    .reduce((parts, part) => {\n      const match = part.match('([a-zA-Z])(.+)');\n      if (match) {\n        parts.push(match[1]);\n        parts.push(match[2]);\n      } else {\n        parts.push(part);\n      }\n      return parts;\n    }, []);\n}\n\nexport function getPathPartsCommand (pathParts) {\n  return pathParts.reduce(function(commands, part) {\n    if (parseFloat(part) == part && commands.length) {\n      commands[commands.length - 1].push(part);\n    } else {\n      commands.push([part]);\n    }\n    return commands;\n  }, []);\n}\n\nexport function pointForCommand(cmd) {\n  return {\n    x: parseFloat(cmd[cmd.length - 2]),\n    y: parseFloat(cmd[cmd.length - 1])\n  };\n}\n\nexport function moveTowardsFractional(movingPoint, targetPoint, fraction) {\n  return {\n    x: movingPoint.x + (targetPoint.x - movingPoint.x) * fraction,\n    y: movingPoint.y + (targetPoint.y - movingPoint.y) * fraction\n  };\n}\n\nexport function adjustCommand(cmd, newPoint) {\n  if (cmd.length > 2) {\n    cmd[cmd.length - 2] = newPoint.x;\n    cmd[cmd.length - 1] = newPoint.y;\n  }\n}\n\nexport function roundShape(pathString, radius, useFractionalRadius = false) {\n  const pathParts = getPathParts(pathString)\n  const commands = getPathPartsCommand(pathParts)\n  let resultCommands = [];\n  \n  if (commands.length > 1) {\n    let startPoint = pointForCommand(commands[0]);\n    // Handle the close path case with a \"virtual\" closing line\n    let virtualCloseLine = null;\n    if (commands[commands.length - 1][0] === 'Z' && commands[0].length > 2) {\n      virtualCloseLine = ['L', startPoint.x, startPoint.y];\n      commands[commands.length - 1] = virtualCloseLine;\n    }\n    // We always use the first command (but it may be mutated)\n    resultCommands.push(commands[0]);\n    \n    for (let cmdIndex = 1; cmdIndex < commands.length; cmdIndex++) {\n      let prevCmd = resultCommands[resultCommands.length - 1];\n      \n      let curCmd = commands[cmdIndex];\n      let nextCmd = (curCmd === virtualCloseLine) ? commands[1] : commands[cmdIndex + 1];\n      if (nextCmd && prevCmd && (prevCmd.length > 2) && curCmd[0] === 'L' && nextCmd.length > 2 && nextCmd[0] === 'L') {\n        let prevPoint = pointForCommand(prevCmd);\n        let curPoint = pointForCommand(curCmd);\n        let nextPoint = pointForCommand(nextCmd);\n        // The start and end of the cuve are just our point moved towards the previous and next points, respectivly\n        let curveStart, curveEnd;\n        \n        if (useFractionalRadius) {\n          curveStart = moveTowardsFractional(curPoint, prevCmd.origPoint || prevPoint, radius);\n          curveEnd = moveTowardsFractional(curPoint, nextCmd.origPoint || nextPoint, radius);\n        } else {\n          curveStart = moveTowardsLength(curPoint, prevPoint, radius);\n          curveEnd = moveTowardsLength(curPoint, nextPoint, radius);\n        }\n        adjustCommand(curCmd, curveStart);\n        curCmd.origPoint = curPoint;\n        resultCommands.push(curCmd);\n        \n        let startControl = moveTowardsFractional(curveStart, curPoint, .5);\n        let endControl = moveTowardsFractional(curPoint, curveEnd, .5);\n        \n        let curveCmd = ['C', startControl.x, startControl.y, endControl.x, endControl.y, curveEnd.x, curveEnd.y];\n        // Save the original point for fractional calculations\n        curveCmd.origPoint = curPoint;\n        resultCommands.push(curveCmd);\n      } else {\n        resultCommands.push(curCmd);\n      }\n    }\n    if (virtualCloseLine) {\n      let newStartPoint = pointForCommand(resultCommands[resultCommands.length-1]);\n      resultCommands.push(['Z']);\n      adjustCommand(resultCommands[0], newStartPoint);\n    }\n  } else {\n    resultCommands = commands;\n  }\n  return resultCommands.reduce(function(str, c){ return str + c.join(' ') + ' '; }, '');\n}\n","import { Helper } from '../helper'\nimport Subject from './subject'\n\nimport { addClass, getTransform, parseMatrix, getOffset } from '../util/css-util'\nimport { roundShape } from '../util/round'\n\nimport {\n  snapToGrid,\n  snapCandidate,\n  rotatedTopLeft,\n  toPX,\n  fromPX,\n  getUnitDimension,\n  floatToFixed\n} from './common'\n\nconst brackets = '<div class=\"dg-hdl dg-rotator\"></div>\\\n        <div class=\"dg-hdl dg-hdl-t dg-hdl-l dg-hdl-tl\"></div>\\\n        <div class=\"dg-hdl dg-hdl-t dg-hdl-r dg-hdl-tr\"></div>\\\n        <div class=\"dg-hdl dg-hdl-b dg-hdl-r dg-hdl-br\"></div>\\\n        <div class=\"dg-hdl dg-hdl-b dg-hdl-l dg-hdl-bl\"></div>\\\n        <div class=\"dg-hdl dg-hdl-t dg-hdl-c dg-hdl-tc\"></div>\\\n        <div class=\"dg-hdl dg-hdl-b dg-hdl-c dg-hdl-bc\"></div>\\\n        <div class=\"dg-hdl dg-hdl-m dg-hdl-l dg-hdl-ml\"></div>\\\n        <div class=\"dg-hdl dg-hdl-m dg-hdl-r dg-hdl-mr\"></div>';\n\nconst guidLinesConfig = {\n  stopDragX: false,\n  tempPositionX: 0,\n  stopDragY: false,\n  tempPositionY: 0,\n  normalizeX: 0,\n  normalizeY: 0,\n  newPositionX: 0,\n  newPositionY: 0\n}\n\nexport default class Draggable extends Subject {\n  constructor (el, options, Observable) {\n    window.parent.addEventListener('message', handleEditorEvents)\n    super(el, Observable)\n    this.enable(options)\n  }\n\n  _init (item, options) {\n    _init.call(this, item, options)\n  }\n  _destroy (item) {\n    _destroy.call(this, item)\n  }\n\n  _drag () {\n    processMove.call(this, ...arguments)\n  }\n\n  _rotate () {\n    processRotate.call(this, ...arguments)\n  }\n\n  _resize () {\n    processResize.call(this, ...arguments)\n  }\n\n  _compute () {\n    return _compute.call(this, ...arguments)\n  }\n\n  _apply () {\n    window.parent.postMessage({ event: 'apply-from-iframe' }, 'http://127.0.0.1:3978/#/edit')\n    const {\n      storage,\n      el\n    } = this\n    const _el = Helper(el)\n\n    const {\n      cached,\n      parent,\n      dimens,\n      handle,\n      controls\n    } = storage\n\n    if (!cached) return\n\n    const matrix = [...cached]\n\n    const diffLeft = matrix[4]\n    const diffTop = matrix[5]\n\n    const css = matrixToCSS(matrix)\n\n    const pW = parent.css('width')\n    const pH = parent.css('height')\n\n    const left = parseFloat(toPX(_el.css('left'), pW))\n    const top = parseFloat(toPX(_el.css('top'), pH))\n\n    css.left = fromPX(left + diffLeft + 'px', pW, dimens.left)\n    css.top = fromPX(top + diffTop + 'px', pH, dimens.top)\n\n        const container = el.querySelector('.text-container')\n        const isTextDrag = handle[0].classList.contains('dg-controls') || !container || (!handle[0].classList.contains('dg-hdl-ml') && !handle[0].classList.contains('dg-hdl-mr'))\n        \n        window.parent.postMessage({\n            event: 'resize-on-mouseup', position: {\n                width: controls.style.width,\n                height: controls.style.height,\n                diffLeft,\n                diffTop\n            },\n            isTextDrag: isTextDrag\n        }, 'http://127.0.0.1:3978/#/edit');\n        this.storage.cached = null;\n    }\n    \n    onRefreshState(data) {\n        const store = this.storage;\n        \n        const recalc = refreshState.call(this,\n          data.factor,\n          data.revX,\n          data.revY\n        );\n        \n        Object.keys(recalc).forEach(key => {\n            store[key] = recalc[key];\n        });\n    }\n}\n\nlet locked = true;\nlet dissableX = false;\nlet dissableY = false;\nlet savedLeft = 0;\nlet savedTop = 0;\nlet normalizeX = false;\nlet isLockedLayer = false;\nlet round = 0;\nlet rect = false;\nlet thickness = 0;\nfunction handleEditorEvents (event) {\n    if (event.data.event === 'set-lock-settings') {\n        locked = event.data.locked;\n    } else if (event.data.event === 'lock-layer') {\n        isLockedLayer = event.data.locked;\n    } else if (event.data.event === 'set-shape-round-value') {\n        round = event.data.round;\n    } else if (event.data.event === 'select-shape') {\n        rect = event.data.rect;\n    } else if (event.data.event === '-thickness') {\n        thickness = event.data.thickness;\n    }\n}\n\nfunction _init(sel) {\n    const wrapper = document.createElement('div');\n    \n    addClass(wrapper, 'dg-wrapper');\n    sel.parentNode.insertBefore(wrapper, sel);\n    \n    const container = wrapper;\n    const _sel = Helper(sel);\n    \n    const w = _sel.css('width'),\n      h = _sel.css('height'),\n      t = _sel.css('top'),\n      l = _sel.css('left');\n    \n    const _parent = Helper(container.parentNode);\n    const css = {\n        top: t,\n        left: l,\n        width: toPX(w, _parent.css('width')),\n        height: toPX(h, _parent.css('height')),\n        transform: getTransform(_sel)\n    };\n    \n    const controls = document.createElement('div');\n    const guidlines = {\n        centerX: document.querySelector('.guid-line.guid-line-y.guid-center-y'),\n        centerY: document.querySelector('.guid-line.guid-line-x.guid-center-x'),\n        left: document.querySelector('.guid-line.guid-line-y.guid-left'),\n        right: document.querySelector('.guid-line.guid-line-y.guid-right'),\n        top: document.querySelector('.guid-line.guid-line-x.guid-top'),\n        bottom: document.querySelector('.guid-line.guid-line-x.guid-bottom')\n    }\n    let activeElement = document.querySelector('.dg-wrapper + .drag-item-content');\n    if (!activeElement) {\n        activeElement = document.querySelector('.drag-item-content');\n    }\n    isLockedLayer = !!+activeElement.dataset.locked;\n    let coordinates = [];\n    let activeElementCoordinates = {};\n    const activeElementConfig = activeElement.getBoundingClientRect();\n    coordinates = [].map.call(document.querySelectorAll('.drag-item-content'), element => {\n        if (activeElement !== element) {\n            const config = element.getBoundingClientRect();\n            return {\n                left: config.left,\n                top: config.top,\n                right: config.right,\n                bottom: config.bottom,\n                centerX: config.left + config.width / 2,\n                centerY: config.top + config.height / 2\n            }\n        }\n    }).filter(config => config);\n    activeElementCoordinates = {\n        left: activeElementConfig.left,\n        top: activeElementConfig.top,\n        right: activeElementConfig.right,\n        bottom: activeElementConfig.bottom,\n        centerX: activeElementConfig.left + activeElementConfig.width / 2,\n        centerY: activeElementConfig.top + activeElementConfig.height / 2\n    }\n    const screenCenterX = document.body.clientWidth / 2;\n    const screenCenterY = document.body.clientHeight / 2;\n    controls.innerHTML = brackets;\n    \n    addClass(controls, 'dg-controls');\n    \n    container.appendChild(controls);\n    \n    const _controls = Helper(controls);\n    _controls.css(css);\n    \n    const _container = Helper(container);\n    const svg = activeElement.querySelector('svg');\n    const svgPath = activeElement.querySelector('svg path');\n    round = +activeElement.dataset.round;\n    rect = activeElement.dataset.rect === '1';\n    Object.assign(this.storage, {\n        controls: controls,\n        guidlines: guidlines,\n        coordinates: coordinates,\n        screenCenterX: screenCenterX,\n        screenCenterY: screenCenterY,\n        verticalCoordinates: getArrayOfCoorditates(coordinates, screenCenterX, 'left'),\n        horizontalCoordinates: getArrayOfCoorditates(coordinates, screenCenterY, 'top'),\n        activeElementCoordinates: activeElementCoordinates,\n        activeElement: activeElement,\n        handles: {\n            tl: _container.find('.dg-hdl-tl'),\n            tr: _container.find('.dg-hdl-tr'),\n            br: _container.find('.dg-hdl-br'),\n            bl: _container.find('.dg-hdl-bl'),\n            tc: _container.find('.dg-hdl-tc'),\n            bc: _container.find('.dg-hdl-bc'),\n            ml: _container.find('.dg-hdl-ml'),\n            mr: _container.find('.dg-hdl-mr'),\n            rotator: _container.find('.dg-rotator')\n        },\n        svg: svg,\n        svgPath: svgPath,\n        parent: _parent\n    });\n    _controls.on('mousedown', this._onMouseDown)\n      .on('touchstart', this._onTouchStart);\n    const textContainer = _sel[0].querySelector('.text-container');\n    if (textContainer) {\n        _container.find('.dg-hdl-bc')[0].style.display = 'none';\n        _container.find('.dg-hdl-tc')[0].style.display = 'none';\n    }\n}\n\nfunction _destroy() {\n    window.parent.removeEventListener(handleLayerLock)\n    const { controls } = this.storage;\n    \n    Helper(controls).off('mousedown', this._onMouseDown)\n      .off('touchstart', this._onTouchStart);\n    \n    this.el.parentNode.removeChild(controls.parentNode);\n}\n\nfunction _compute(e) {\n    guidLinesConfig.stopDragX = false;\n    guidLinesConfig.stopDragY = false;\n    guidLinesConfig.tempPositionX = 0;\n    guidLinesConfig.tempPositionY = 0;\n    guidLinesConfig.normalizeX = 0;\n    guidLinesConfig.newPositionX = 0;\n    guidLinesConfig.newPositionY = 0;\n    guidLinesConfig.tempPositionX = 0;\n    guidLinesConfig.tempPositionY = 0;\n    window.parent.postMessage({ event: 'compute-from-iframe' }, 'http://127.0.0.1:3978/#/edit');\n    const {\n        el,\n        storage\n    } = this;\n    \n    const {\n        handles,\n        controls: ctrls,\n        parent,\n        snap\n    } = storage;\n    \n    const handle = Helper(e.target);\n    const container = el.querySelector('.text-container');\n    const leftSide = handle[0].classList.contains('dg-hdl-ml');\n    const rightSide = handle[0].classList.contains('dg-hdl-mr');\n    if (container && !leftSide && !rightSide) {\n        container.style.width = `${el.clientWidth}px`;\n    }\n    let factor = 1;\n    \n    //reverse axis\n    const revX = handle.is(handles.tl) ||\n      handle.is(handles.ml) ||\n      handle.is(handles.bl) ||\n      handle.is(handles.tc);\n    \n    const revY = handle.is(handles.tl) ||\n      handle.is(handles.tr) ||\n      handle.is(handles.tc) ||\n      handle.is(handles.ml);\n    \n    //reverse angle\n    if (handle.is(handles.tr) ||\n      handle.is(handles.bl)\n    ) {\n        factor = -1;\n    }\n    \n    const tl_off = getOffset(handles.tl[0]),\n      tr_off = getOffset(handles.tr[0]);\n    \n    const refang = Math.atan2(\n      tr_off.top - tl_off.top,\n      tr_off.left - tl_off.left\n    ) * factor;\n    \n    const cw = parseFloat(\n      toPX(ctrls.style.width, parent.css('width'))\n    );\n    const ch = parseFloat(\n      toPX(ctrls.style.height, parent.css('height'))\n    );\n    \n    const transform = parseMatrix(Helper(ctrls));\n    //getting current coordinates considering rotation angle\n    const coords = rotatedTopLeft(\n      transform[4],\n      transform[5],\n      cw,\n      ch,\n      refang,\n      revX,\n      revY\n    );\n    const offset_ = getOffset(ctrls);\n    \n    const center_x = offset_.left + cw / 2,\n      center_y = offset_.top + ch / 2;\n    \n    const pressang = Math.atan2(\n      e.pageY - center_y,\n      e.pageX - center_x\n    );\n    \n    const _el = Helper(el);\n    const styleList = el.style;\n    \n    const dimens = {\n        top: getUnitDimension(styleList.top || _el.css('top')),\n        left: getUnitDimension(styleList.left || _el.css('left')),\n        width: getUnitDimension(styleList.width || _el.css('width')),\n        height: getUnitDimension(styleList.height || _el.css('height'))\n    };\n    \n    const parentTransform = parseMatrix(parent);\n    \n    return {\n        parentScale: [parentTransform[0], parentTransform[3]],\n        transform,\n        cw,\n        ch,\n        center: {\n            x: center_x,\n            y: center_y\n        },\n        left: snapCandidate(transform[4], snap.x),\n        top: snapCandidate(transform[5], snap.y),\n        coordY: coords.top,\n        coordX: coords.left,\n        factor,\n        pressang,\n        refang,\n        revX,\n        revY,\n        handle,\n        onTopEdge: handle.is(handles.tl) || handle.is(handles.tc) || handle.is(handles.tr),\n        onLeftEdge: handle.is(handles.tl) || handle.is(handles.ml) || handle.is(handles.bl),\n        onRightEdge: handle.is(handles.tr) || handle.is(handles.mr) || handle.is(handles.br),\n        onBottomEdge: handle.is(handles.br) || handle.is(handles.bc) || handle.is(handles.bl),\n        dimens\n    }\n}\n\nfunction refreshState(factor, revX, revY) {\n    \n    const {\n        controls: ctrls,\n        handles,\n        parent,\n        snap\n    } = this.storage;\n    \n    const tl_off = getOffset(handles.tl[0]),\n      tr_off = getOffset(handles.tr[0]);\n    \n    const refang = Math.atan2(\n      tr_off.top - tl_off.top,\n      tr_off.left - tl_off.left\n    ) * factor;\n    \n    const cw = parseFloat(\n      toPX(ctrls.style.width, parent.css('width'))\n    );\n    const ch = parseFloat(\n      toPX(ctrls.style.height, parent.css('height'))\n    );\n    \n    const transform = parseMatrix(Helper(ctrls));\n    \n    //getting current coordinates considering rotation angle\n    const coords = rotatedTopLeft(\n      transform[4],\n      transform[5],\n      cw,\n      ch,\n      refang,\n      revX,\n      revY\n    );\n    \n    const _sel = Helper(this.el);\n    const styleList = this.el.style;\n    return {\n        transform: transform,\n        parentTransform: parseMatrix(parent),\n        left: snapCandidate(transform[4], snap.x),\n        top: snapCandidate(transform[5], snap.y),\n        coordX: coords.left,\n        coordY: coords.top,\n        refang: refang,\n        cw: cw,\n        ch: ch,\n        dimens: {\n            top: getUnitDimension(styleList.top || _sel.css('top')),\n            left: getUnitDimension(styleList.left || _sel.css('left')),\n            width: getUnitDimension(styleList.width || _sel.css('width')),\n            height: getUnitDimension(styleList.height || _sel.css('height'))\n        }\n    }\n}\n\nfunction processResize(\n  width,\n  height,\n  revX,\n  revY\n) {\n    if (!isLockedLayer) {\n        const {\n            el,\n            storage\n        } = this;\n        \n        const {\n            controls,\n            handle,\n            snap,\n            left,\n            top,\n            coordX,\n            coordY,\n            refang,\n            dimens,\n            parent,\n            transform,\n            svg,\n            svgPath\n        } = storage;\n        \n        const { style } = controls;\n        \n        if (width !== null) {\n            style.width = `${snapToGrid(width, snap.x)}px`;\n        }\n        \n        const canResizeWithShiftKey = handle[0].classList.contains('dg-hdl-br') ||\n          handle[0].classList.contains('dg-hdl-tr') ||\n          handle[0].classList.contains('dg-hdl-bl') ||\n          handle[0].classList.contains('dg-hdl-tl');\n        let isText = false;\n        const container = el.querySelector('.text-container');\n        if (container && canResizeWithShiftKey) {\n            isText = true;\n        }\n        const scaleHeight = storage.ch / storage.cw;\n        if (height !== null) {\n            if (((!storage.shiftKey && locked) || isText) && canResizeWithShiftKey) {\n                height = width * scaleHeight;\n            }\n            style.height = `${snapToGrid(height, snap.y)}px`;\n        }\n        \n        if (container && (handle[0].classList.contains('dg-hdl-mr') || handle[0].classList.contains('dg-hdl-ml'))) {\n            let newHeight = 0;\n            [].forEach.call(container.querySelectorAll('.simple-text-line'), (el) => {\n                newHeight += el.clientHeight || el.offsetHeight;\n            })\n            style.height = !newHeight ? `${snapToGrid(container.parentNode.clientHeight, snap.y)}px` : `${snapToGrid(newHeight, snap.y)}px`;\n        }\n        \n        const coords = rotatedTopLeft(\n          left,\n          top,\n          style.width,\n          style.height,\n          refang,\n          revX,\n          revY\n        );\n        let resultY = top - (coords.top - coordY);\n        let resultX = left - (coords.left - coordX);\n        \n        const matrix = [...transform];\n        \n        if (isText) {\n            container.style.transformOrigin = `top left`;\n            container.style.transform = `scale(${parseFloat(style.width) / storage.cw})`;\n        }\n        matrix[4] = resultX;\n        matrix[5] = resultY;\n        \n        const css = matrixToCSS(matrix);\n        \n        Helper(controls).css(css);\n        \n        css.width = fromPX(\n          style.width,\n          parent.css('width'),\n          dimens.width\n        );\n        \n        css.height = fromPX(\n          style.height,\n          parent.css('height'),\n          dimens.height\n        );\n        \n        const size = {\n            width: css.width,\n            height: css.height,\n        }\n        \n        Helper(el).css(css);\n        if (rect) {\n            handleRectPath(svg, svgPath, el.clientWidth, el.clientHeight);\n        }\n        window.parent.postMessage({\n            event: 'resize-from-package',\n            size: size,\n            isText: isText\n        }, 'http://127.0.0.1:3978/#/edit');\n        storage.cached = matrix;\n    }\n}\nlet normalizeValue = 0;\nfunction processMove(\n  top,\n  left\n) {\n    if (!isLockedLayer) {\n        const {\n            el,\n            storage\n        } = this;\n        const {\n            controls,\n            transform,\n            snap\n        } = storage;\n        \n        const matrix = [...transform];\n        \n        const props = {\n            elDrag: el,\n            elDragContainer: document.querySelector('body')\n        }\n        if (props.elDrag.name && props.elDrag.name.match('fullscreen')) {\n            props.elDragClient = {\n                left: Math.floor(+props.elDrag.name.split('/')[1]),\n                right: Math.floor(+props.elDrag.name.split('/')[2]),\n                top: Math.floor(+props.elDrag.name.split('/')[3]),\n                bottom: Math.floor(+props.elDrag.name.split('/')[4])\n            }\n            if (props.elDragClient.left || Math.abs(Math.floor(props.elDragClient.right + 2)) - Math.floor(props.elDragContainer.clientWidth)) {\n                if (left > 0 && props.elDragClient.left) {\n                    // need to optimize this\n                    if (Math.abs(props.elDragClient.left) > Math.abs(left)) {\n                        matrix[4] = snapToGrid(transform[4] + Math.floor(left), snap.x);\n                    } else {\n                        matrix[4] = snapToGrid(transform[4] + Math.abs(props.elDragClient.left), snap.x);\n                    }\n                } else if (left <= 0 && Math.floor(props.elDragClient.right - 2) - Math.floor(props.elDragContainer.clientWidth)) {\n                    if ((Math.abs(Math.floor(props.elDragClient.right)) - Math.floor(props.elDragContainer.clientWidth)) - Math.abs(left) > 0) {\n                        matrix[4] = snapToGrid(transform[4] + left, snap.x);\n                    } else {\n                        matrix[4] = snapToGrid(transform[4] - (Math.abs(Math.floor(props.elDragClient.right)) - Math.floor(props.elDragContainer.clientWidth)), snap.x);\n                    }\n                }\n            }\n            if (props.elDragClient.top) {\n                if (top > 0 && props.elDragClient.top) {\n                    // need to optimize this\n                    if (Math.abs(props.elDragClient.top) > Math.abs(top)) {\n                        matrix[5] = snapToGrid(transform[5] + Math.floor(top), snap.y);\n                    } else {\n                        matrix[5] = snapToGrid(transform[5] + (Math.abs(props.elDragClient.top)), snap.y);\n                    }\n                } else if (left <= 0 && Math.floor(props.elDragClient.bottom - 2) - Math.floor(props.elDragContainer.clientHeight)) {\n                    if ((Math.abs(Math.floor(props.elDragClient.bottom)) - Math.floor(props.elDragContainer.clientHeight)) - Math.abs(top) > 0) {\n                        matrix[5] = snapToGrid(transform[5] + top, snap.y);\n                    } else {\n                        matrix[5] = snapToGrid(transform[5] - (Math.abs(Math.floor(props.elDragClient.bottom)) - Math.floor(props.elDragContainer.clientHeight)), snap.y);\n                    }\n                }\n            }\n            \n        } else {\n            const activeElementClientRect = storage.activeElement.getBoundingClientRect();\n            const activeElementConfig = {\n                left: activeElementClientRect.left,\n                top: activeElementClientRect.top,\n                right: activeElementClientRect.right,\n                bottom: activeElementClientRect.bottom,\n                centerX: activeElementClientRect.left + activeElementClientRect.width / 2,\n                centerY: activeElementClientRect.top + activeElementClientRect.height / 2\n            };\n            matrix[4] = snapToGrid(transform[4] + handleGuideLines(storage, left, activeElementConfig, 'left'), snap.x);\n            // matrix[4] = snapToGrid(transform[4] + left, snap.x);\n            matrix[5] = snapToGrid(transform[5] + handleGuideLines(storage, top, activeElementConfig, 'top'), snap.y);\n            // matrix[5] = snapToGrid(transform[5] + top, snap.y);\n        }\n        const css = matrixToCSS(matrix);\n        Helper(controls).css(css);\n        Helper(el).css(css);\n        storage.cached = matrix;\n    }\n}\n\nconst vertivalConfigFields = ['left', 'right', 'centerX']\nconst horizontalConfigFields = ['top', 'bottom', 'centerY']\n\nlet tmp = 0;\nlet stopDrag = false;\n\n\n// RECT HANDLER\nfunction handleRectPath (svg, svgPath, width, height) {\n    svg.setAttribute('viewBox', `0 0 ${width} ${height}`);\n    const newPath = `M0 0 L ${width} 0 L${width} ${height} L 0 ${height} Z`;\n    \n    let newRound = +round;\n    if (newRound > +width / 2 || newRound > +height / 2) {\n        newRound = +width < +height ? +width / 2 : +height / 2;\n    }\n    svgPath.setAttribute('d', roundShape(newPath, newRound));\n}\n// RECT HANDLER\n\n// GUIDLINES\nfunction approxeq(numbers, controlNumber, epsilon) {\n    if (epsilon == null) {\n        epsilon = 5;\n    }\n    return Array.from(numbers).find(number => Math.abs(number - controlNumber) < epsilon)\n};\n\nfunction getGuidlinesConfig(elenentPositions, activeElemetPosition, screenCenterX) {\n    const config = {\n        left: false,\n        centerX: false,\n        right: false,\n        top: false,\n        centerY: false,\n        bottom: false\n    }\n    const coorditates = {\n    \n    }\n    let diffsX = [];\n    let diffsY = [];\n    \n    const sides = {\n        leftSide: approxeq(elenentPositions, activeElemetPosition.left),\n        centerElementSideX: approxeq(elenentPositions, activeElemetPosition.centerX),\n        rightSide: approxeq(elenentPositions, activeElemetPosition.right),\n        topSide: approxeq(elenentPositions, activeElemetPosition.top),\n        bottomSide: approxeq(elenentPositions, activeElemetPosition.bottom),\n        centerElementSideY: approxeq(elenentPositions, activeElemetPosition.centerY)\n    }\n    \n    for (let [key, value] of Object.entries(sides)) {\n        if (value) {\n            switch (key) {\n                case 'leftSide': {\n                    coorditates.left = sides.leftSide;\n                    config.left = true;\n                    diffsX.push(+sides.leftSide - +activeElemetPosition.left);\n                    break;\n                }\n                case 'centerElementSideX': {\n                    coorditates.centerX = sides.centerElementSideX;\n                    config.centerX = true;\n                    diffsX.push(+sides.centerElementSideX - +activeElemetPosition.centerX);\n                    break;\n                }\n                case 'rightSide': {\n                    coorditates.right = sides.rightSide;\n                    config.right = true;\n                    diffsX.push(+sides.rightSide - +activeElemetPosition.right);\n                    break;\n                }\n                case 'topSide': {\n                    coorditates.top = sides.topSide;\n                    config.top = true;\n                    diffsY.push(+sides.topSide - +activeElemetPosition.top);\n                    break;\n                }\n                case 'centerElementSideY': {\n                    coorditates.centerY = sides.centerElementSideY;\n                    config.centerY = true;\n                    diffsY.push(+sides.centerElementSideY - +activeElemetPosition.centerY);\n                    break;\n                }\n                case 'bottomSide': {\n                    coorditates.bottom = sides.bottomSide;\n                    config.bottom = true;\n                    diffsY.push(+sides.bottomSide - +activeElemetPosition.bottom);\n                    break;\n                }\n                default:\n                    break;\n            }\n        }\n    }\n    return {\n        config: config,\n        coorditates: coorditates,\n        diffX: diffsX.length ? Math.min.apply(null, diffsX) : 10,\n        diffY: diffsY.length ? Math.min.apply(null, diffsY) : 10\n    };\n}\n\nfunction getArrayOfCoorditates(coordinates, center, type) {\n    let res = [center];\n    coordinates.map(element => {\n        res = type === 'left'\n          ? res.concat(Object.values((({left, right, centerX}) => ({left, right, centerX}))(element)))\n          : res.concat(Object.values((({top, bottom, centerY}) => ({top, bottom, centerY}))(element)))\n    })\n    return res;\n}\n\nfunction handleGuideLines (storage, position, activeElementConfig, type) {\n    const linesConfig = getGuidlinesConfig(type === 'left' ? storage.verticalCoordinates : storage.horizontalCoordinates, activeElementConfig);\n    const linesCoordinates = type === 'left'\n      ? (({left, right, centerX}) => ({left, right, centerX}))(linesConfig.coorditates)\n      : (({top, bottom, centerY}) => ({top, bottom, centerY}))(linesConfig.coorditates)\n    const resPosition = type === 'left'\n      ? stopDragHandlerX(linesCoordinates, linesConfig.diffX, position)\n      : stopDragHandlerY(linesCoordinates, linesConfig.diffY, position);\n    for (let [key, value] of Object.entries(linesCoordinates)) {\n        if (value && Math.abs(value - activeElementConfig[key]) < 2.5) {\n            storage.guidlines[key].style.display = 'block';\n            storage.guidlines[key].style[type] = `${parseInt(value)}px`;\n            storage.guidlines[key].style[type === 'left' ? 'borderLeft' : 'borderTop'] = (value === storage.screenCenterY || value === storage.screenCenterX)\n              ? `1.5px solid rgba(51, 122, 255, 0.51)`\n              : `1.5px dotted rgba(51, 122, 255, 0.51)`;\n        } else {\n            storage.guidlines[key].style.display = 'none';\n        }\n    }\n    return resPosition;\n    \n}\n\n// TODO: optimize (to one function)\nfunction stopDragHandlerX(linesConfig, diffX, position) {\n    guidLinesConfig.normalizeX = guidLinesConfig.newPositionX - position\n    guidLinesConfig.newPositionX = position;\n    for (let [key, value] of Object.entries(linesConfig)) {\n        if (value && !guidLinesConfig.stopDragX && !guidLinesConfig.tempPositionX && !guidLinesConfig.stopDragX) {\n            guidLinesConfig.stopDragX = true;\n            guidLinesConfig.newPositionX += (diffX + guidLinesConfig.normalizeX);\n            guidLinesConfig.tempPositionX = guidLinesConfig.newPositionX;\n        }  else if (Math.abs(guidLinesConfig.newPositionX - guidLinesConfig.tempPositionX) >= 5 && guidLinesConfig.stopDragX) {\n            guidLinesConfig.stopDragX = false;\n            guidLinesConfig.normalizeX = 0;\n            guidLinesConfig.tempPositionX = 0;\n        }\n    }\n    return !guidLinesConfig.stopDragX ? guidLinesConfig.newPositionX : guidLinesConfig.tempPositionX;\n}\n\nfunction stopDragHandlerY(linesConfig, diffY, position) {\n    guidLinesConfig.normalizeY = guidLinesConfig.newPositionY - position\n    guidLinesConfig.newPositionY = position;\n    for (let [key, value] of Object.entries(linesConfig)) {\n        if (value && !guidLinesConfig.stopDragY && !guidLinesConfig.tempPositionY) {\n            guidLinesConfig.stopDragY = true;\n            guidLinesConfig.newPositionY += (diffY + guidLinesConfig.normalizeY);\n            guidLinesConfig.tempPositionY = guidLinesConfig.newPositionY;\n        }  else if (Math.abs(guidLinesConfig.newPositionY - guidLinesConfig.tempPositionY) >= 5 && guidLinesConfig.stopDragY) {\n            guidLinesConfig.stopDragY = false;\n            guidLinesConfig.normalizeY = 0;\n            guidLinesConfig.tempPositionY = 0;\n        }\n    }\n    return !guidLinesConfig.stopDragY ? guidLinesConfig.newPositionY : guidLinesConfig.tempPositionY;\n}\n\n// END GUIDLINES\n\nfunction processRotate(radians) {\n    if (!isLockedLayer) {\n        const {\n            el,\n            storage\n        } = this;\n        \n        const {\n            controls,\n            transform,\n            refang,\n            snap\n        } = storage;\n        \n        const matrix = [...transform];\n        \n        const angle = snapToGrid(refang + radians, snap.angle);\n        //rotate(Xdeg) = matrix(cos(X), sin(X), -sin(X), cos(X), 0, 0);\n        matrix[0] = floatToFixed(Math.cos(angle));\n        matrix[1] = floatToFixed(Math.sin(angle));\n        matrix[2] = -floatToFixed(Math.sin(angle));\n        matrix[3] = floatToFixed(Math.cos(angle));\n        \n        window.parent.postMessage({\n            event: 'rotate-from-resizer',\n            value: angle * (180 / Math.PI)\n        }, 'http://127.0.0.1:3978/#/edit');\n        const css = matrixToCSS(matrix);\n        \n        Helper(controls).css(css);\n        Helper(el).css(css);\n        \n        storage.cached = matrix;\n    }\n}\n\nfunction matrixToCSS(arr) {\n    const style = `matrix(${arr.join()})`;\n    \n    return {\n        transform: style,\n        webkitTranform: style,\n        mozTransform: style,\n        msTransform: style,\n        otransform: style\n    }\n}\n","import {\n    recalcPoint\n} from '../common'\n\nconst dRE = /([achlmqstvz])([^achlmqstvz]*)/gi;\nconst sepRE = /\\s*,\\s*|\\s+/g;\n\nfunction parsePath(path)  {\n\n    let match = dRE.lastIndex = 0;\n\n    const serialized = [];\n\n    while ((match = dRE.exec(path))) {\n\n        const cmd = match[1];\n        const upCmd = cmd.toUpperCase();\n\n        serialized.push({\n            relative: cmd !== upCmd,\n            key: upCmd,\n            cmd: cmd,\n            value: match[2].trim().split(sepRE).map(val => { \n                if (!isNaN(val)) {\n                    return Number(val);\n                }\n            })\n        });\n    }\n\n    return serialized;\n}\n\nexport function movePath(params) {\n\n    const { path, x, y } = params;\n\n    const serialized = parsePath(path);\n\n    let str = '';\n\n    let firstCommand = true;\n\n    for (let i = 0, len = serialized.length; i < len; i++) {\n\n        const item = serialized[i];\n\n        const { \n            value: values,\n            key: cmd,\n            relative\n        } = item;\n\n        switch (cmd) {\n            case 'M':\n                if (relative && !firstCommand) break;\n                values[0] = values[0] + x;\n                values[1] = values[1] + y;\n                break;\n            case 'A':\n                if (relative) break;\n                values[5] = values[5] + x;\n                values[6] = values[6] + y;\n                break;\n            case 'C':\n                if (relative) break;\n                values[0] = values[0] + x;\n                values[1] = values[1] + y;\n                values[2] = values[2] + x;\n                values[3] = values[3] + y;\n                values[4] = values[4] + x;\n                values[5] = values[5] + y;\n                break;\n            case 'H':\n                if (relative) break;\n                values[0] = values[0] + x;\n                break;\n            case 'V':\n                if (relative) break;\n                values[0] = values[0] + y;\n                break;\n            case 'L':\n            case 'T':\n                if (relative) break;\n                values[0] = values[0] + x;\n                values[1] = values[1] + y;\n                break;\n            \n            case 'Q':\n            case 'S':\n                if (relative) break;\n                values[0] = values[0] + x;\n                values[1] = values[1] + y;\n                values[2] = values[2] + x;\n                values[3] = values[3] + y;\n                break;\n            case 'Z':\n                values[0] = '';\n                break;\n        }\n\n        str += item.cmd + item.value.join(',') + ' ';\n        firstCommand = false;\n    }\n\n    return str;\n}\n\nexport function resizePath(params) {\n\n    const {\n        bBox,\n        path,\n        baseData,\n        dx,\n        dy,\n        revX,\n        revY,\n        fixedX,\n        fixedY\n    } = params;\n\n    const serialized = parsePath(path);\n\n    const { \n        width: boxW,\n        height: boxH\n    } = bBox;\n\n    let str = '';\n    const res = [];\n\n    let firstCommand = true;\n\n    for (let i = 0, len = serialized.length; i < len; i++) {\n\n        const item = serialized[i];\n\n        const { \n            value: values,\n            key: cmd,\n            relative\n        } = item;\n            \n        switch (cmd) {\n\n            case 'A': {\n\n                //A rx ry x-axis-rotation large-arc-flag sweep-flag x y\n                const [ rx, ry, x_axis_rot, large_arc_flag, sweep_flag, x, y ] = values;\n\n                const factorX = getFactor(revX),\n                    factorY = getFactor(revY);\n                \n                const params = [];\n\n                const newRx = rx + dx * factorX * (rx / boxW),\n                    newRy =  ry + dy * factorY * (ry / boxH);\n                \n                params.push(\n                    newRx,\n                    newRy,\n                    x_axis_rot,\n                    large_arc_flag,\n                    sweep_flag\n                );\n\n                if (relative) {\n\n                    params.push(\n                        setRelativeCoord(x, dx * factorX, boxW),\n                        setRelativeCoord(y, dy * factorY, boxH)\n                    );\n\n                } else {\n\n                    let valX = setCoord(x, dx, fixedX, boxW),\n                        valY = setCoord(y, dy, fixedY, boxH);\n\n                    const { resX, resY } = recalcPoint({\n                        x: valX,\n                        y: valY,\n                        ...baseData\n                    });\n\n                    params.push(\n                        resX,\n                        resY\n                    );\n                }\n\n                res.push(params);\n\n                break;\n            }\n\n            case 'C': {\n\n                //C x1 y1, x2 y2, x y (or c dx1 dy1, dx2 dy2, dx dy)\n                const [ x1, y1, x2, y2, x, y ] = values;\n\n                if (relative) {\n\n                    const factorX = getFactor(revX),\n                        factorY = getFactor(revY);\n\n                    res.push([\n                        setRelativeCoord(x1, dx * factorX, boxW),\n                        setRelativeCoord(y1, dy * factorY, boxH),\n                        setRelativeCoord(x2, dx * factorX, boxW),\n                        setRelativeCoord(y2, dy * factorY, boxH),\n                        setRelativeCoord(x, dx * factorX, boxW),\n                        setRelativeCoord(y, dy * factorY, boxH)\n                    ]);\n\n                } else {\n\n                    const factorX1 = revX && x1 > fixedX || !revX && x1 < fixedX ? -1 : 1,    \n                        factorY1 = revY && y1 > fixedY || !revY && y1 < fixedY ? -1 : 1,\n                        factorX2 = revX && x2 > fixedX || !revX && x2 < fixedX ? -1 : 1,    \n                        factorY2 = revY && y2 > fixedY || !revY && y2 < fixedY ? -1 : 1;\n\n                    const { resX: resX1, resY: resY1 } = recalcPoint({\n                        x: setCoord(x1, dx * factorX1, fixedX, boxW),\n                        y: setCoord(y1, dy * factorY1, fixedY, boxH),\n                        ...baseData\n                    });\n\n                    const { resX: resX2, resY: resY2 } = recalcPoint({\n                        x: setCoord(x2, dx * factorX2, fixedX, boxW),\n                        y: setCoord(y2, dy * factorY2, fixedY, boxH),\n                        ...baseData\n                    });\n\n                    const { resX: resX3, resY: resY3 } = recalcPoint({\n                        x: setCoord(x, dx, fixedX, boxW),\n                        y: setCoord(y, dy, fixedY, boxH),\n                        ...baseData\n                    });\n\n                    res.push([\n                        resX1,\n                        resY1,\n                        resX2,\n                        resY2,\n                        resX3,\n                        resY3\n                    ]);\n                }\n                break;\n            }\n\n            case 'H': {\n\n                if (relative) {\n                \n                    const factorX = getFactor(revX);\n                    res.push([\n                        setRelativeCoord(values[0], dx * factorX, boxW)\n                    ]);\n\n                } else {\n\n                    const { resX } = recalcPoint({\n                        x: setCoord(values[0], dx, fixedX, boxW),\n                        y: 0,\n                        ...baseData\n                    });\n\n                    res.push([resX]);\n                }\n                break;\n            }\n\n            case 'V': {\n\n                if (relative) {\n\n                    const factorY = getFactor(revY);\n\n                    res.push([\n                        setRelativeCoord(values[0], dy * factorY, boxH)\n                    ]);\n\n                } else {\n\n                    const { resY } = recalcPoint({\n                        x: 0,\n                        y: setCoord(values[0], dy, fixedY, boxH),\n                        ...baseData\n                    });\n\n                    res.push([resY]);\n                }\n                break;\n            }\n\n            case 'T':\n            case 'L': {\n\n                if (relative) {\n\n                    const factorX = getFactor(revX),\n                        factorY = getFactor(revY);\n\n                    res.push([\n                        setRelativeCoord(values[0], dx * factorX, boxW), \n                        setRelativeCoord(values[1], dy * factorY, boxH)\n                    ]);\n\n                } else {\n\n                    const { resX, resY } = recalcPoint({\n                        x: setCoord(values[0], dx, fixedX, boxW),\n                        y: setCoord(values[1], dy, fixedY, boxH),\n                        ...baseData\n                    });\n\n                    res.push([resX, resY]);\n                }\n                break;\n            }\n\n            case 'M': {\n\n                // M x y (or dx dy)\n                const [ x, y ] = values;\n\n                if (relative && !firstCommand) {\n\n                    const factorX = getFactor(revX),\n                        factorY = getFactor(revY);\n\n                    res.push([\n                        setRelativeCoord(x, dx * factorX, boxW), \n                        setRelativeCoord(y, dy * factorY, boxH)\n                    ]);\n\n                } else {\n\n                    const { resX, resY } = recalcPoint({\n                        x: setCoord(x, dx, fixedX, boxW),\n                        y: setCoord(y, dy, fixedY, boxH),\n                        ...baseData\n                    });\n\n                    res.push([resX, resY]);\n                }\n   \n                break;\n            }\n\n            case 'Q': {\n\n                //Q x1 y1, x y (or q dx1 dy1, dx dy)\n                const [x1, y1, x, y] = values;\n\n                if (relative) {\n\n                    const factorX = getFactor(revX),\n                        factorY = getFactor(revY);\n\n                    res.push([\n                        setRelativeCoord(x1, dx * factorX, boxW), \n                        setRelativeCoord(y1, dy * factorY, boxH), \n                        setRelativeCoord(x, dx * factorX, boxW), \n                        setRelativeCoord(y, dy * factorY, boxH)\n                    ]);\n\n                } else {\n\n                    const factorX = revX && x1 > fixedX || !revX && x1 < fixedX ? -1 : 1,    \n                        factorY = revY && y1 > fixedY || !revY && y1 < fixedY ? -1 : 1;\n\n                    const { resX: resX1, resY: resY1 } = recalcPoint({\n                        x: setCoord(x1, dx * factorX, fixedX, boxW),\n                        y: setCoord(y1, dy * factorY, fixedY, boxH),\n                        ...baseData\n                    });\n\n                    const { resX: resX2, resY: resY2 } = recalcPoint({\n                        x: setCoord(x, dx, fixedX, boxW),\n                        y: setCoord(y, dy, fixedY, boxH),\n                        ...baseData\n                    });\n\n                    res.push([resX1, resY1, resX2, resY2]);\n                }\n                \n                break;\n            }\n\n            case 'S': {\n\n                //S x2 y2, x y (or s dx2 dy2, dx dy)\n                const [ x2, y2, x, y ] = values;\n\n                if (relative) {\n\n                    const factorX = getFactor(revX),    \n                        factorY = getFactor(revY);\n\n                    res.push([\n                        setRelativeCoord(x2, dx * factorX, boxW),\n                        setRelativeCoord(y2, dy * factorY, boxH),\n                        setRelativeCoord(x, dx * factorX, boxW),\n                        setRelativeCoord(y, dy * factorY, boxH)\n                    ]);\n                } else {\n\n                    const factorX = revX && x2 > fixedX || !revX && x2 < fixedX ? -1 : 1,    \n                        factorY = revY && y2 > fixedY || !revY && y2 < fixedY ? -1 : 1;\n\n                    const { resX : resX1, resY: resY1 } = recalcPoint({\n                        x: setCoord(x2, dx * factorX, fixedX, boxW),\n                        y: setCoord(y2, dy * factorY, fixedY, boxH),\n                        ...baseData\n                    });\n\n                    const { resX : resX2, resY: resY2 } = recalcPoint({\n                        x: setCoord(x, dx, fixedX, boxW),\n                        y: setCoord(y, dy, fixedY, boxH),\n                        ...baseData\n                    });\n\n                    res.push([\n                        resX1,\n                        resY1,\n                        resX2,\n                        resY2\n                    ]);\n                }\n                break;\n            }\n\n            case 'Z': {\n                res.push(['']);\n                break;\n            }\n        }\n\n        str += item.cmd + res[i].join(',') + ' ';\n\n        firstCommand = false;\n    }\n\n    return str;\n}\n\nexport function setCoord(value, diff, fixed, dist) {\n    return value + diff * (Math.abs(value - fixed) / dist);\n}\n\nfunction setRelativeCoord(value, diff, dist) {\n    return value + diff * (value / dist);\n}\n\nexport function getFactor(b) {\n    return b === true ? -1 : 1;\n}","import { Helper } from '../../helper'\nimport Subject from '../subject'\n\nimport { \n    parseTransform,\n    getOffset\n} from '../../util/css-util'\n\nimport {\n    DEG,\n    snapToGrid,\n    snapCandidate,\n    rotatedTopLeft,\n    recalcPoint\n} from '../common'\n\nimport {\n    movePath,\n    resizePath,\n    setCoord,\n    getFactor\n} from './path'\nimport { isUndef } from '../../util/util';\n\nconst MIN_SIZE = 2; \nconst ROT_OFFSET = 25;\nconst floatRE = /[+-]?\\d+(\\.\\d+)?/g; \nconst translateRE = /translate\\(.*\\)(.*)translate\\(.*\\)|$/;\n\nexport default class DraggableSVG extends Subject {\n\n    constructor(el, options, Observable) {\n        super(el, Observable);\n        this.enable(options);\n    }\n\n    _init(item, options) {\n        _init.call(this, item, options);\n    }\n\n    _destroy(item) {\n        _destroy.call(this, item);\n    }\n\n    _drag() {\n        processMove.call(this, ...arguments);\n    }\n\n    _rotate() {\n        processRotate.call(this, ...arguments);\n    }\n\n    _resize() {\n        processResize.call(this, ...arguments);\n    }\n\n    _compute() {\n        return _compute.call(this, ...arguments);\n    }\n\n    _apply(actionName) {\n\n        const {\n            box, \n            handles,\n            refang,\n            factor,\n            wrapper,\n            cached,\n            transform\n        } = this.storage;\n\n        const translate = parseTransform(wrapper.getAttribute('transform') || 'translate(0 0)').translate;\n\n        const { x, y, width: newWidth, height: newHeight } = box.getBBox();\n\n        const dx = translate[0],\n            dy = translate[1],\n            resultX = x + dx,\n            resultY = y + dy;\n\n        const centerX = resultX + newWidth / 2,\n            centerY = resultY + newHeight / 2;\n\n        if (actionName !== 'rotate') {\n\n            applyTransformToHandles(box, handles, {\n                x: resultX,\n                y: resultY,\n                width: newWidth,\n                height: newHeight,\n                angle: refang * factor\n            });\n        }\n\n        if (actionName === 'drag') {\n\n            if (dx === 0 && dy === 0) return;\n                \n            wrapper.removeAttribute('transform');\n\n            const els = [];\n\n            if (this.el.tagName.toLowerCase() === 'g') {\n\n                this.el.childNodes.forEach(item => {\n                    if (item.nodeType === 1) {\n                        els.push(item);\n                    }\n                });\n\n                this.el.removeAttribute('transform');\n            } else {\n                els.push(this.el);\n            }\n\n            els.forEach((element) => {\n                applyTranslate(element, {\n                    x: dx,\n                    y: dy,\n                    angle: refang * factor * DEG,\n                    centerX,\n                    centerY\n                });\n            })\n        }\n\n        if (actionName === 'resize') {\n\n            if (isUndef(cached)) return;\n\n            const els = [];\n\n            const {\n                revX, \n                revY,\n                scaleX,\n                scaleY,\n                diffX,\n                diffY\n            } = cached;\n                \n            let isGroup = false;\n\n            if (this.el.tagName.toLowerCase() === 'g') {\n                this.el.childNodes.forEach(item => {\n                    if (item.nodeType === 1) {\n                        els.push(item);\n                    }\n                });\n                isGroup = true;\n            } else {\n                els.push(this.el);\n            }\n\n            els.forEach((element) => {\n\n                applyResize(element, {\n                    scaleX,\n                    scaleY,\n                    diffX: diffX * getFactor(revX),\n                    diffY: diffY * getFactor(revY),\n                    revX,\n                    revY,\n                    angle: refang * factor,\n                    factor,\n                    centerX,\n                    centerY,    \n                    bBox: isGroup === true \n                            ? transform.bBox \n                            : element.getBBox(),\n                    store: this.storage\n                });\n            });\n\n            this.storage.cached = null;\n        }\n    }\n\n    onRefreshState(data) {\n\n        const store = this.storage;\n\n        const recalc = refreshState.call(\n            this,\n            data\n        );\n\n        Object.keys(data).forEach(key => {\n            store[key] = data[key];\n        });\n\n        Object.keys(recalc).forEach(key => {\n            store[key] = recalc[key];\n        });\n    }\n}\n\nfunction _init(sel) {\n\n    const wrapper = createSVG('g');\n    sel.parentNode.appendChild(wrapper);\n\n    const {\n        width: w, \n        height: h, \n        x, \n        y\n    } = sel.getBBox();\n\n    const transform = sel.getAttribute('transform') || 'translate(0 0)';\n\n    const box = createSVG('rect');\n\n    const attrs = [\n        ['width', w],\n        ['height', h],\n        ['x', x],\n        ['y', y],\n        ['fill', 'transparent'],\n        ['stroke', '#00a8ff'],\n        ['stroke-dasharray', '3 3'],\n        ['transform', transform]\n    ];\n\n    attrs.forEach(item => {\n        box.setAttribute(item[0], item[1]);\n    });\n\n    let group = createSVG('g');\n        group.appendChild(box);\n\n    wrapper.appendChild(group);\n\n    const handles = {\n        tl: [x, y],\n        tr: [x + w, y],\n        br: [x + w, y + h],\n        bl: [x, y + h],\n        tc: [x + w / 2, y],\n        bc: [x + w / 2, y + h],\n        ml: [x, y + h / 2],\n        mr: [x + w, y + h / 2],\n        rotator: [x + w / 2, y - ROT_OFFSET]\n    };\n\n    Object.keys(handles).forEach(key => {\n        const data = handles[key];\n        handles[key] = createHandler(data[0], data[1], transform);\n        wrapper.appendChild(\n            createSVG('g').appendChild(handles[key]).parentNode\n        );\n    });\n\n    Object.assign(this.storage, {\n        wrapper,\n        box,\n        handles,\n        parent: wrapper.parentNode\n    });\n\n    Helper(wrapper).on('mousedown', this._onMouseDown)\n                    .on('touchstart', this._onTouchStart);\n}\n\nfunction _compute(e) {\n\n    const {\n        box,\n        handles,\n        snap,\n        parent\n    } = this.storage;\n\n    const handle = Helper(e.target);\n\n    let factor = 1;\n\n    //reverse axis\n    const revX = handle.is(handles.tl) ||\n                handle.is(handles.ml) ||\n                handle.is(handles.bl) ||\n                handle.is(handles.tc);\n\n    const revY = handle.is(handles.tl) || \n                handle.is(handles.tr) || \n                handle.is(handles.tc) || \n                handle.is(handles.ml);\n\n    //reverse angle\n    if (handle.is(handles.tr) || \n        handle.is(handles.bl)\n    ) { \n        factor = -1;\n    }\n\n    const tl_off = getOffset(handles.tl),\n        tr_off = getOffset(handles.tr);\n        \n    const refang = Math.atan2(\n        tr_off.top - tl_off.top, \n        tr_off.left - tl_off.left\n    ) * factor;\n\n    const bBox = box.getBBox();\n\n    const { width: cw, height: ch, x: c_left, y: c_top } = bBox;\n                                                                                                \n    const coords = rotatedTopLeft(\n        c_left,\n        c_top,\n        cw,\n        ch,\n        refang,\n        revX,\n        revY\n    );\n\n    const boxOffset = getOffset(box);\n\n    const center_x = boxOffset.left + cw / 2,\n        center_y = boxOffset.top + ch / 2;\n\n    const pressang = Math.atan2(\n        e.pageY - center_y,\n        e.pageX - center_x\n    );\n\n    const onTopEdge = handle.is(handles.tl) || handle.is(handles.tc) || handle.is(handles.tr),\n        onLeftEdge = handle.is(handles.tl) || handle.is(handles.ml) || handle.is(handles.bl),\n        onRightEdge = handle.is(handles.tr) || handle.is(handles.mr) || handle.is(handles.br),\n        onBottomEdge = handle.is(handles.br) || handle.is(handles.bc) || handle.is(handles.bl);\n\n    const transform = {\n        orig: this.el.getAttribute('transform'),\n        value: box.getAttribute('transform'),\n        scaleX: revX ? cw + c_left : c_left,\n        scaleY: revY ? ch + c_top : c_top,\n        bBox\n    };\n\n    return {\n        transform,\n        parentScale: parseTransform(parent.getAttribute('transform') || 'scale(1 1)').scale,\n        cw,\n        ch,\n        center: {\n            x: boxOffset.left + cw / 2,\n            y: boxOffset.top + ch / 2,\n            left: c_left + cw / 2,\n            top: c_top + ch / 2\n        },\n        left: snapCandidate(c_left, snap.x),\n        top: snapCandidate(c_top, snap.y),\n        coordX: coords.left,\n        coordY: coords.top,\n        factor,\n        pressang,\n        refang,\n        revX,\n        revY,\n        handle,\n        onTopEdge,\n        onLeftEdge,\n        onRightEdge,\n        onBottomEdge\n    }\n}\n\nfunction _destroy() {\n\n    const { wrapper } = this.storage;\n\n    Helper(wrapper).off('mousedown', this._onMouseDown)\n                    .off('touchstart', this._onTouchStart);\n\n    this.el.parentNode.removeChild(wrapper);\n}\n\nfunction refreshState(params) {\n\n    const { \n        factor, \n        revX, \n        revY,\n    } = params;\n\n    const { \n        box,\n        handles,\n        snap\n    } = this.storage;\n\n    const tl_off = getOffset(handles.tl),\n        tr_off = getOffset(handles.tr);\n\n    let refang = Math.atan2(\n        tr_off.y - tl_off.y, \n        tr_off.x - tl_off.x\n    ) * factor;\n\n    const bBox = box.getBBox();\n\n    const { width: cw, height: ch, x: c_left, y: c_top } = bBox;\n                                                                                                 \n    const coords = rotatedTopLeft(\n        c_left,\n        c_top,\n        cw,\n        ch,\n        refang,\n        revX,\n        revY\n    );\n\n    const boxOffset = getOffset(box);\n\n    const transform = {\n        orig: this.el.getAttribute('transform'),\n        value: box.getAttribute('transform'),\n        scaleX: revX ? cw + c_left : c_left,\n        scaleY: revY ? ch + c_top : c_top,\n        bBox\n    };\n\n    return {\n        transform,\n        cw,\n        ch,\n        center: {\n            x: boxOffset.left + cw / 2,\n            y: boxOffset.top + ch / 2,\n            left: c_left + cw / 2,\n            top: c_top + ch / 2\n        },\n        left: snapCandidate(c_left, snap.x),\n        top: snapCandidate(c_top, snap.y),\n        coordX: coords.left,\n        coordY: coords.top,\n        factor,\n        refang\n    }\n}\n\nfunction processResize(\n    width,\n    height,\n    revX, \n    revY\n) {\n\n    const {\n        box,\n        handles,\n        snap,\n        left,\n        top,\n        coordX,\n        coordY,\n        refang,\n        factor,\n        cw,\n        ch,\n        transform\n    } = this.storage;\n    const sel = this.el;\n        \n    let newWidth = Number(box.getAttribute('width')),\n        newHeight = Number(box.getAttribute('height'));\n\n    if (width !== null) {\n        newWidth = snapToGrid(width, snap.x);\n    }\n\n    if (height !== null) {\n        newHeight = snapToGrid(height, snap.y);\n    }\n\n    if (Math.abs(newWidth) < MIN_SIZE || Math.abs(newHeight) < MIN_SIZE) return;\n\n    const coords = rotatedTopLeft(\n        left,\n        top,\n        newWidth,\n        newHeight,\n        refang,\n        revX,\n        revY\n    );\n\n    const resultY = top - (coords.top - coordY),\n        resultX = left - (coords.left - coordX);\n\n    applyTransformToHandles(box, handles, {\n        x: resultX,\n        y: resultY,\n        width: newWidth,\n        height: newHeight,\n        angle: refang * factor\n    });\n\n    const scaleX = newWidth / cw,\n        scaleY = newHeight / ch;\n\n    this.storage.cached = {\n        scaleX: scaleX,\n        scaleY: scaleY,\n        diffX: newWidth - cw,\n        diffY: newHeight - ch,\n        revX: revX,\n        revY: revY\n    };\n\n    const { scaleX: ptX, scaleY: ptY } = transform;\n\n    const scaleString = `translate(${ptX} ${ptY}) scale(${scaleX} ${scaleY}) translate(${-ptX} ${-ptY})`;\n\n    if (sel.tagName.toLowerCase() === 'g') {\n        sel.childNodes.forEach(element => {\n\n            if (element.nodeType !== 1) return;\n\n            const oldTransform = element.getAttribute('transform') || '';\n            element.setAttribute(\n                'transform', \n                oldTransform.replace(translateRE, scaleString)\n            );\n        });\n    } else {\n        const oldTransform = sel.getAttribute('transform') || '';\n        sel.setAttribute(\n            'transform', \n            oldTransform.replace(translateRE, scaleString)\n        );\n    }\n}\n\nfunction processMove(\n    top,\n    left\n) {\n    let {\n        snap,\n        transform,\n        wrapper\n    } = this.storage;\n\n    const originTransform = transform.orig || '';\n    \n    const x = snapToGrid(left, snap.x),\n        y = snapToGrid(top, snap.y);\n\n    const transformString = `translate(${x} ${y})`;\n    const newTransform = originTransform.replace(/translate\\(.+\\)|^/, transformString);\n\n    wrapper.setAttribute('transform', transformString);\n    this.el.setAttribute('transform', newTransform);\n}\n\nfunction processRotate(radians) {\n\n    const {\n        refang,\n        snap,\n        center,\n        box,\n        handles\n    } = this.storage;\n\n    const angle = snapToGrid(refang + radians, snap.angle);\n\n    const transform = `rotate(${angle * DEG} ${center.left} ${center.top})`;\n\n    box.setAttribute('transform', transform);\n\n    Object.keys(handles).forEach(hdl => {\n        handles[hdl].setAttribute('transform', transform);\n    });\n\n    if (this.el.tagName.toLowerCase() === 'g') {\n        this.el.childNodes.forEach((element) => {\n            if (element.nodeType !== 1) return;\n            element.setAttribute('transform', transform);\n        });\n    } else {\n        this.el.setAttribute('transform', transform);\n    }\n}\n\nfunction createSVG(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\n\nfunction createHandler(l, t, transform) {\n\n    const handler = createSVG('circle');\n    \n    const items = {\n        cx: l,\n        cy: t,\n        r: 6,\n        fill: 'white',\n        stroke: '#00a8ff',\n        transform: transform\n    };\n\n    Object.keys(items).map(key => {\n        handler.setAttribute(key, items[key]);\n    });\n\n    return handler;\n}\n\nfunction applyTranslate(element, data) {\n\n    const {\n        x,\n        y,\n        angle,\n        centerX,\n        centerY\n    } = data;\n\n    const attrs = [\n        ['transform', `rotate(${angle} ${centerX} ${centerY})`]\n    ];\n\n    switch(element.tagName.toLowerCase()) {\n\n        case 'text':\n        case 'rect': {\n\n                let resX = Number(element.getAttribute('x')) + x,\n                    resY = Number(element.getAttribute('y')) + y;\n\n                attrs.push(\n                    ['x', resX],\n                    ['y', resY]\n                );\n            }\n            break;\n\n        case 'circle':\n        case 'ellipse': {\n\n                let resX = Number(element.getAttribute('cx')) + x,\n                    resY = Number(element.getAttribute('cy')) + y;\n\n                attrs.push(\n                    ['cx', resX],\n                    ['cy', resY]\n                );\n            }\n            break;\n        \n        case 'line': {\n\n                let resX1 = Number(element.getAttribute('x1')) + x,\n                    resY1 = Number(element.getAttribute('y1')) + y,\n                    resX2 = Number(element.getAttribute('x2')) + x,\n                    resY2 = Number(element.getAttribute('y2')) + y;\n\n                attrs.push(\n                    ['x1', resX1],\n                    ['y1', resY1],\n                    ['x2', resX2],\n                    ['y2', resY2]\n                );\n            }\n            break;\n\n        case 'polygon':\n        case 'polyline': {\n\n                const points = parsePoints(element.getAttribute('points'));\n                const result = points.map(item => { \n\n                    item[0] = Number(item[0]) + x;\n                    item[1] = Number(item[1]) + y;\n\n                    return item.join(' ');\n                }).join(' '); \n\n                attrs.push(\n                    ['points', result]\n                );\n            }\n            break;\n        \n        case 'path': {\n\n                const path = element.getAttribute('d');\n\n                attrs.push(['d', movePath(\n                    {\n                        path, \n                        x, \n                        y\n                    }\n                )]);\n            }\n            break;\n\n        default:\n            break;\n    }\n\n    attrs.forEach(item => {\n        element.setAttribute(item[0], item[1]);\n    });\n}\n\nfunction applyResize(element, data) {\n\n    const {\n        scaleX,\n        scaleY,\n        diffX,\n        diffY,\n        revX,\n        revY,\n        angle,\n        centerX,\n        centerY,\n        bBox,\n        store\n    } = data;\n\n    const {\n        onRightEdge,\n        onLeftEdge,\n        onTopEdge,\n        onBottomEdge,\n        center\n    } = store;\n\n    const { \n        x: boxX, \n        y: boxY, \n        width: boxW, \n        height: boxH\n    } = bBox;\n\n    let fixedX = 0, \n        fixedY = 0;\n    \n    if (onRightEdge) {\n        fixedX = boxX;\n    } \n    if (onLeftEdge) {\n        fixedX = boxX + boxW;\n    } \n    if (onTopEdge) {\n        fixedY = boxY + boxH;\n    } \n    if (onBottomEdge) {\n        fixedY = boxY;\n    }\n\n    const baseData = {\n        centerX: center.left,\n        centerY: center.top,\n        newCenterX: centerX,\n        newCenterY: centerY,\n        angle: angle\n    };\n\n    const attrs = [\n        ['transform', `rotate(${angle * DEG} ${centerX} ${centerY})`]\n    ];\n\n    switch(element.tagName.toLowerCase()) {\n\n        case 'text': {\n\n            const x = Number(element.getAttribute('x')),\n                y = Number(element.getAttribute('y'));\n\n            const { resX, resY } = recalcPoint({\n                x: setCoord(x, diffX, fixedX, boxW),\n                y: setCoord(y, diffY, fixedY, boxH),\n                ...baseData\n            });\n\n            attrs.push(\n                ['x', resX + (scaleX < 0 ? boxW : 0)],\n                ['y', resY + (scaleY < 0 ? boxH : 0)]\n            );\n        }\n        break;\n\n        case 'circle': {\n\n                const r = Number(element.getAttribute('r')),\n                    cx = Number(element.getAttribute('cx')),\n                    cy = Number(element.getAttribute('cy')),\n                    newR = r * (Math.abs(scaleX) + Math.abs(scaleY)) / 2;\n\n                const { resX, resY } = recalcPoint({\n                    x: setCoord(cx, diffX, fixedX, boxW),\n                    y: setCoord(cy, diffY, fixedY, boxH),\n                    ...baseData\n                });\n\n                attrs.push(\n                    ['r', newR],\n                    ['cx', resX],\n                    ['cy', resY]\n                );\n            }\n            break;\n\n        case 'rect': {\n\n                const width = Number(element.getAttribute('width')),\n                    height = Number(element.getAttribute('height')),\n                    x = Number(element.getAttribute('x')),\n                    y = Number(element.getAttribute('y'));\n\n                const { resX, resY } = recalcPoint({\n                    x: setCoord(x, diffX, fixedX, boxW),\n                    y: setCoord(y, diffY, fixedY, boxH),\n                    ...baseData\n                });\n\n                const newWidth = width * Math.abs(scaleX),\n                    newHeight = height * Math.abs(scaleY);\n\n                attrs.push(\n                    ['x', resX - (scaleX < 0 ? newWidth : 0)],\n                    ['y', resY - (scaleY < 0 ? newHeight : 0)],\n                    ['width', newWidth],\n                    ['height', newHeight]\n                );\n            }\n            break;\n    \n        case 'ellipse': {\n\n                const rx = Number(element.getAttribute('rx')),\n                    ry = Number(element.getAttribute('ry')),\n                    cx = Number(element.getAttribute('cx')),\n                    cy = Number(element.getAttribute('cy'));\n\n                const { resX, resY } = recalcPoint({\n                    x: setCoord(cx, diffX, fixedX, boxW),\n                    y: setCoord(cy, diffY, fixedY, boxH),\n                    ...baseData\n                });\n\n                attrs.push(\n                    ['rx', rx * Math.abs(scaleX)],\n                    ['ry', ry * Math.abs(scaleY)],\n                    ['cx', resX],\n                    ['cy', resY]\n                );\n            }\n            break;\n        \n        case 'line': {\n\n                const resX1 = Number(element.getAttribute('x1')),\n                    resY1 = Number(element.getAttribute('y1')),\n                    resX2 = Number(element.getAttribute('x2')),\n                    resY2 = Number(element.getAttribute('y2'));\n\n                const { resX : resX1_, resY: resY1_  } = recalcPoint({\n                    x: setCoord(resX1, diffX, fixedX, boxW),\n                    y: setCoord(resY1, diffY, fixedY, boxH),\n                    ...baseData\n                });\n\n                const { resX : resX2_, resY: resY2_  } = recalcPoint({\n                    x: setCoord(resX2, diffX, fixedX, boxW),\n                    y: setCoord(resY2, diffY, fixedY, boxH),\n                    ...baseData\n                });\n\n                attrs.push(\n                    ['x1', resX1_],\n                    ['y1', resY1_],\n                    ['x2', resX2_],\n                    ['y2', resY2_]\n                );\n            }\n            break;\n\n        case 'polygon':\n        case 'polyline': {\n\n                const points = parsePoints(element.getAttribute('points'));\n                const result = points.map(item => {\n\n                    const { resX, resY } = recalcPoint({\n                        x: setCoord(Number(item[0]), diffX, fixedX, boxW),\n                        y: setCoord(Number(item[1]), diffY, fixedY, boxH),\n                        ...baseData\n                    });\n\n                    item[0] = resX;\n                    item[1] = resY;\n\n                    return item.join(' ');\n\n                }).join(' ');\n\n                attrs.push(['points', result]);\n            }\n            break;\n        \n        case 'path': {\n\n                const path = element.getAttribute('d');\n\n                attrs.push(['d', resizePath(\n                    {\n                        bBox,\n                        path,\n                        baseData,\n                        dx: diffX, \n                        dy: diffY,\n                        revX,\n                        revY,\n                        fixedX,\n                        fixedY\n                    }\n                )]);\n            }\n            break;\n\n        default: {}\n            break;\n    }\n\n    attrs.forEach(attr => {\n        element.setAttribute(attr[0], attr[1]);\n    });\n}\n\nfunction applyTransformToHandles(box, handles, data) {\n\n    let { x, y, width, height, angle } = data;\n\n    const halfWidth = width / 2,\n        halfHeight = height / 2;\n\n    const newTransform = `rotate(${angle * DEG} ${x + halfWidth} ${y + halfHeight})`;\n\n    const attrs = {\n        tl: [x, y],\n        ml: [x, y + halfHeight],\n        bl: [x, y + height],\n        tc: [x + halfWidth, y],\n        tr: [x + width, y],\n        mr: [x + width, y + halfHeight],\n        br: [x + width, y + height],\n        bc: [x + halfWidth, y + height],\n        rotator: [x + halfWidth, y - ROT_OFFSET + (height < 0 ? height : 0)]\n    };\n\n    x = x + (width < 0 ? width : 0);\n    y = y + (height < 0 ? height : 0);\n\n    const boxAttrs = {\n        x: x,\n        y: y,\n        width: Math.abs(width),\n        height: Math.abs(height),\n        transform: newTransform\n    };\n\n    Object.keys(boxAttrs).forEach(attr => {\n        box.setAttribute(attr, boxAttrs[attr]);\n    });\n\n    Object.keys(handles).forEach(key => {\n        const hdl = handles[key];\n        hdl.setAttribute('cx', attrs[key][0]);\n        hdl.setAttribute('cy', attrs[key][1]);\n        hdl.setAttribute('transform', newTransform);\n    });\n}\n\nfunction parsePoints(pts) {\n    return pts.match(floatRE).reduce((result, value, index, array) => {\n        if (index % 2 === 0) {\n            result.push(array.slice(index, index + 2));\n        } \n        return result; \n    }, []);\n}\n","/* @license\n * Move/Rotate/Resize tool\n * Released under the MIT license, 2018-2019\n * nichollascarter@gmail.com\n*/\n\nimport '../style/subjx.css'\nimport _drag from './core/transform/index'\nimport { Helper_ } from './core/helper'\n\nclass Subjx extends Helper_ {\n\n    constructor(params) {\n        super(params);\n    }\n\n    drag(method) {\n        return _drag.call(this, method);\n    }\n}\n\nexport default function(params) {\n    return new Subjx(params);\n}","import Observable from '../observer/Observer'\nimport Draggable from './html'\nimport DraggableSVG from './svg/index'\n\nimport {\n    arrMap\n} from '../util/util'\n\n// factory method for creating draggable elements\nexport default function _drag(options) {\n    if (this.length) {\n        const Ob = new Observable();\n        return arrMap.call(this, item => {\n            if (!(item instanceof SVGElement)) {\n                return new Draggable(item, options, Ob);\n            } else {\n                return new DraggableSVG(item, options, Ob);\n            }   \n        })\n    }\n}"],"sourceRoot":""}