<% function getImageUrl (content) {
  return typeof content.image === 'string' ? ((content.value || content.image) || '') : content.image.url || (content.value || content.image) || ''
}
if (layer.settings.layerSettings.fullscreen) { %>
  <% if (withAnimations && ['pan-up', 'pan-down'].includes(layer.settings.animateIn) && layer.settings.animateIn){ %>
  <div style="transform: translateX(50%);">
    <% } %>
    <amp-img
    <% if ((withAnimations && ['pan-left', 'pan-right', 'pan-up', 'pan-down'].includes(layer.settings.animateIn) && layer.settings.animateIn && !layer.content.compressed ) ||
            layer.content.compressed && layer.settings.animateIn){ %>
      animate-in="<%= layer.settings.animateIn %>"
      <% if (layer.settings.animateDuration){ %>animate-in-duration="<%= layer.settings.animateDuration %>s" <% } %>
      <% if (layer.settings.animateDelay){ %>animate-in-delay="<%= layer.settings.animateDelay %>s" <% } %><% } %>

    <%if (['zoom-in'].includes(layer.settings.animateIn) && layer.content.compressed) { %> scale-start="1" scale-end="1.4" <% } %>
    <%if (['zoom-out'].includes(layer.settings.animateIn) && layer.content.compressed) { %> scale-start="1.4" scale-end="1" <% } %>

      src="<%= getImageUrl(layer.content) %>"
      width="<%= layer.settings.layerSettings.width %>"
      height="<%= layer.settings.layerSettings.height %>"
      layout="<%=['zoom-in', 'zoom-out'].includes(layer.settings.animateIn) && layer.content.compressed ? 'fill' : 'responsive'%>"
      alt="an image"
            <% if ((!layer.content.compressed && (layer.content.compressed && ['pan-up', 'pan-down', 'rotate-in-right', 'rotate-in-left', 'twirl-in'].includes(layer.settings.animateIn))) || (layer.content.compressed && ['pan-up', 'pan-down', 'rotate-in-right', 'rotate-in-left', 'twirl-in'].includes(layer.settings.animateIn))) { %>
      style="width:100%;height:100%;object-fit:fill;position: static;opacity: <%=layer.settings.generalSettings.opacity / 100 %>;"
            <% } %>
    >
    </amp-img>
    <% if (withAnimations && ['pan-up', 'pan-down'].includes(layer.settings.animateIn) && layer.settings.animateIn){ %>
  </div>
  <% } %>

<% } else { %>
  <amp-img
          class="small-image"
          src="<%= getImageUrl(layer.content) %>"
          width="<%= layer.settings.layerSettings.width %>"
          height="<%= layer.settings.layerSettings.height %>"
          layout="responsive"
          alt="an image"
  <% if (layer.settings.generalSettings.shadow !== '0') { %>
          style="
                  filter: drop-shadow(0px 0px <%= layer.settings.generalSettings.shadow %>px rgba(0,0,0,0.75));
                  position: initial;
                  opacity: <%=layer.settings.generalSettings.opacity / 100 %>;"
          <% } else { %>
          style="position: initial;opacity: <%=layer.settings.generalSettings.opacity / 100 %>;"
          <% } %>
  ></amp-img>
<% } %>
