<% function getImageUrl (content) {
  if (layer.type === 'video') {
    if (content.thumbnail !== '') {
      return content.thumbnail || content.image.thumbnail
    } else if (content.image.thumbnail) {
      return content.image.thumbnail || ''
    } else {
      return ''
    }
  } else {
    return (content.value || content.image) || ''
  }
}
if (layer.settings.layerSettings.fullscreen) { %>
    <% console.log(16) %>
  <% if (withAnimations && ['pan-up', 'pan-down'].includes(layer.settings.animateIn) && layer.settings.animateIn){ %>
  <div style="transform: translateX(50%);">
    <% } %>
    <% console.log(17) %>
    <amp-img
    <% if (withAnimations && ['pan-left', 'pan-right', 'pan-up', 'pan-down'].includes(layer.settings.animateIn) && layer.settings.animateIn){ %>
      animate-in="<%= layer.settings.animateIn %>"
      <% if (layer.settings.animateDuration){ %>
      animate-in-duration="<%= layer.settings.animateDuration %>s" <% } %>
      <% if (layer.settings.animateDelay){ %>
      animate-in-delay="<%= layer.settings.animateDelay %>s" <% } %>
            <% } %>
      src="<%= getImageUrl(layer.content) %>"
      width="<%= layer.settings.layerSettings.width %>"
      height="<%= layer.settings.layerSettings.height %>"
      layout="fixed"
      alt="an image"
      style="width:100%;height:100%;object-fit:fill;position: static;opacity: <%=layer.settings.generalSettings.opacity / 100 %>;">
    </amp-img>
    <% console.log(18) %>
    <% if (withAnimations && ['pan-up', 'pan-down'].includes(layer.settings.animateIn) && layer.settings.animateIn){ %>
  </div>
  <% } %>

<% } else { %>
    <% console.log(19) %>
  <amp-img
          class="small-image"
          src="<%= getImageUrl(layer.content) %>"
          width="<%= layer.settings.layerSettings.width %>"
          height="<%= layer.settings.layerSettings.height %>"
          layout="responsive"
          alt="an image"
  <% if (layer.settings.generalSettings.shadow !== '0') { %>
          style="
                  filter: drop-shadow(0px 0px <%= layer.settings.generalSettings.shadow %>px rgba(0,0,0,0.75));
                  position: initial;
                  opacity: <%=layer.settings.generalSettings.opacity / 100 %>;"
          <% } else { %>
          style="position: initial;opacity: <%=layer.settings.generalSettings.opacity / 100 %>;"
          <% } %>
  ></amp-img>
<% } %>
